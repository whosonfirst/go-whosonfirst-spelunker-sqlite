"use strict";var protomapsL=(()=>{var zn=Object.create;var Oe=Object.defineProperty;var Ln=Object.getOwnPropertyDescriptor;var kn=Object.getOwnPropertyNames,tr=Object.getOwnPropertySymbols,Fn=Object.getPrototypeOf,nr=Object.prototype.hasOwnProperty,Sn=Object.prototype.propertyIsEnumerable;var X=Math.pow,rr=(t,e,r)=>e in t?Oe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ir=(t,e)=>{for(var r in e||(e={}))nr.call(e,r)&&rr(t,r,e[r]);if(tr)for(var r of tr(e))Sn.call(e,r)&&rr(t,r,e[r]);return t};var J=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Cn=(t,e)=>{for(var r in e)Oe(t,r,{get:e[r],enumerable:!0})},sr=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of kn(e))!nr.call(t,i)&&i!==r&&Oe(t,i,{get:()=>e[i],enumerable:!(n=Ln(e,i))||n.enumerable});return t};var $=(t,e,r)=>(r=t!=null?zn(Fn(t)):{},sr(e||!t||!t.__esModule?Oe(r,"default",{value:t,enumerable:!0}):r,t)),Mn=t=>sr(Oe({},"__esModule",{value:!0}),t);var O=(t,e,r)=>new Promise((n,i)=>{var s=l=>{try{a(r.next(l))}catch(u){i(u)}},o=l=>{try{a(r.throw(l))}catch(u){i(u)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,o);a((r=r.apply(t,e)).next())});var ee=J((ys,or)=>{"use strict";or.exports=xe;function xe(t,e){this.x=t,this.y=e}xe.prototype={clone:function(){return new xe(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,r=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=r,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=e*this.x-r*this.y,i=r*this.x+e*this.y;return this.x=n,this.y=i,this},_rotateAround:function(t,e){var r=Math.cos(t),n=Math.sin(t),i=e.x+r*(this.x-e.x)-n*(this.y-e.y),s=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=i,this.y=s,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};xe.convert=function(t){return t instanceof xe?t:Array.isArray(t)?new xe(t[0],t[1]):t}});var cr=J((ws,hr)=>{hr.exports=we;function we(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=r,this.p2y=n}we.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t};we.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t};we.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx};we.prototype.solveCurveX=function(t,e){typeof e=="undefined"&&(e=1e-6);var r,n,i,s,o;for(i=t,o=0;o<8;o++){if(s=this.sampleCurveX(i)-t,Math.abs(s)<e)return i;var a=this.sampleCurveDerivativeX(i);if(Math.abs(a)<1e-6)break;i=i-s/a}if(r=0,n=1,i=t,i<r)return r;if(i>n)return n;for(;r<n;){if(s=this.sampleCurveX(i),Math.abs(s-t)<e)return i;t>s?r=i:n=i,i=(n-r)*.5+r}return i};we.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}});var fr=J((wt,vt)=>{(function(t,e){typeof wt=="object"&&typeof vt!="undefined"?vt.exports=e():typeof define=="function"&&define.amd?define(e):(t=t||self,t.TinyQueue=e())})(wt,function(){"use strict";var t=function(n,i){if(n===void 0&&(n=[]),i===void 0&&(i=e),this.data=n,this.length=this.data.length,this.compare=i,this.length>0)for(var s=(this.length>>1)-1;s>=0;s--)this._down(s)};t.prototype.push=function(n){this.data.push(n),this.length++,this._up(this.length-1)},t.prototype.pop=function(){if(this.length!==0){var n=this.data[0],i=this.data.pop();return this.length--,this.length>0&&(this.data[0]=i,this._down(0)),n}},t.prototype.peek=function(){return this.data[0]},t.prototype._up=function(n){for(var i=this,s=i.data,o=i.compare,a=s[n];n>0;){var l=n-1>>1,u=s[l];if(o(a,u)>=0)break;s[n]=u,n=l}s[n]=a},t.prototype._down=function(n){for(var i=this,s=i.data,o=i.compare,a=this.length>>1,l=s[n];n<a;){var u=(n<<1)+1,h=s[u],d=u+1;if(d<this.length&&o(s[d],h)<0&&(u=d,h=s[d]),o(h,l)>=0)break;s[n]=h,n=u}s[n]=l};function e(r,n){return r<n?-1:r>n?1:0}return t})});var mr=J((vs,_t)=>{"use strict";var Qe=fr();Qe.default&&(Qe=Qe.default);_t.exports=dr;_t.exports.default=dr;function dr(t,e,r){e=e||1;for(var n,i,s,o,a=0;a<t[0].length;a++){var l=t[0][a];(!a||l[0]<n)&&(n=l[0]),(!a||l[1]<i)&&(i=l[1]),(!a||l[0]>s)&&(s=l[0]),(!a||l[1]>o)&&(o=l[1])}var u=s-n,h=o-i,d=Math.min(u,h),m=d/2;if(d===0){var b=[n,i];return b.distance=0,b}for(var w=new Qe(void 0,En),k=n;k<s;k+=d)for(var c=i;c<o;c+=d)w.push(new he(k+m,c+m,m,t));var f=Yn(t),p=new he(n+u/2,i+h/2,0,t);p.d>f.d&&(f=p);for(var g=w.length;w.length;){var y=w.pop();y.d>f.d&&(f=y,r&&console.log("found best %d after %d probes",Math.round(1e4*y.d)/1e4,g)),!(y.max-f.d<=e)&&(m=y.h/2,w.push(new he(y.x-m,y.y-m,m,t)),w.push(new he(y.x+m,y.y-m,m,t)),w.push(new he(y.x-m,y.y+m,m,t)),w.push(new he(y.x+m,y.y+m,m,t)),g+=4)}r&&(console.log("num probes: "+g),console.log("best distance: "+f.d));var x=[f.x,f.y];return x.distance=f.d,x}function En(t,e){return e.max-t.max}function he(t,e,r,n){this.x=t,this.y=e,this.h=r,this.d=In(t,e,n),this.max=this.d+this.h*Math.SQRT2}function In(t,e,r){for(var n=!1,i=1/0,s=0;s<r.length;s++)for(var o=r[s],a=0,l=o.length,u=l-1;a<l;u=a++){var h=o[a],d=o[u];h[1]>e!=d[1]>e&&t<(d[0]-h[0])*(e-h[1])/(d[1]-h[1])+h[0]&&(n=!n),i=Math.min(i,Vn(t,e,h,d))}return i===0?0:(n?1:-1)*Math.sqrt(i)}function Yn(t){for(var e=0,r=0,n=0,i=t[0],s=0,o=i.length,a=o-1;s<o;a=s++){var l=i[s],u=i[a],h=l[0]*u[1]-u[0]*l[1];r+=(l[0]+u[0])*h,n+=(l[1]+u[1])*h,e+=h*3}return e===0?new he(i[0][0],i[0][1],0,t):new he(r/e,n/e,0,t)}function Vn(t,e,r,n){var i=r[0],s=r[1],o=n[0]-i,a=n[1]-s;if(o!==0||a!==0){var l=((t-i)*o+(e-s)*a)/(o*o+a*a);l>1?(i=n[0],s=n[1]):l>0&&(i+=o*l,s+=a*l)}return o=t-i,a=e-s,o*o+a*a}});var kt=J((Ss,xr)=>{"use strict";var jn=ee();xr.exports=ze;function ze(t,e,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=i,t.readFields(Nn,this,e)}function Nn(t,e,r){t==1?e.id=r.readVarint():t==2?Zn(r,e):t==3?e.type=r.readVarint():t==4&&(e._geometry=r.pos)}function Zn(t,e){for(var r=t.readVarint()+t.pos;t.pos<r;){var n=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[n]=i}}ze.types=["Unknown","Point","LineString","Polygon"];ze.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,n=0,i=0,s=0,o=[],a;t.pos<e;){if(n<=0){var l=t.readVarint();r=l&7,n=l>>3}if(n--,r===1||r===2)i+=t.readSVarint(),s+=t.readSVarint(),r===1&&(a&&o.push(a),a=[]),a.push(new jn(i,s));else if(r===7)a&&a.push(a[0].clone());else throw new Error("unknown command "+r)}return a&&o.push(a),o};ze.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,n=0,i=0,s=0,o=1/0,a=-1/0,l=1/0,u=-1/0;t.pos<e;){if(n<=0){var h=t.readVarint();r=h&7,n=h>>3}if(n--,r===1||r===2)i+=t.readSVarint(),s+=t.readSVarint(),i<o&&(o=i),i>a&&(a=i),s<l&&(l=s),s>u&&(u=s);else if(r!==7)throw new Error("unknown command "+r)}return[o,l,a,u]};ze.prototype.toGeoJSON=function(t,e,r){var n=this.extent*Math.pow(2,r),i=this.extent*t,s=this.extent*e,o=this.loadGeometry(),a=ze.types[this.type],l,u;function h(b){for(var w=0;w<b.length;w++){var k=b[w],c=180-(k.y+s)*360/n;b[w]=[(k.x+i)*360/n-180,360/Math.PI*Math.atan(Math.exp(c*Math.PI/180))-90]}}switch(this.type){case 1:var d=[];for(l=0;l<o.length;l++)d[l]=o[l][0];o=d,h(o);break;case 2:for(l=0;l<o.length;l++)h(o[l]);break;case 3:for(o=qn(o),l=0;l<o.length;l++)for(u=0;u<o[l].length;u++)h(o[l][u]);break}o.length===1?o=o[0]:a="Multi"+a;var m={type:"Feature",geometry:{type:a,coordinates:o},properties:this.properties};return"id"in this&&(m.id=this.id),m};function qn(t){var e=t.length;if(e<=1)return[t];for(var r=[],n,i,s=0;s<e;s++){var o=Wn(t[s]);o!==0&&(i===void 0&&(i=o<0),i===o<0?(n&&r.push(n),n=[t[s]]):n.push(t[s]))}return n&&r.push(n),r}function Wn(t){for(var e=0,r=0,n=t.length,i=n-1,s,o;r<n;i=r++)s=t[r],o=t[i],e+=(o.x-s.x)*(s.y+o.y);return e}});var Ft=J((Cs,br)=>{"use strict";var Hn=kt();br.exports=gr;function gr(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Jn,this,e),this.length=this._features.length}function Jn(t,e,r){t===15?e.version=r.readVarint():t===1?e.name=r.readString():t===5?e.extent=r.readVarint():t===2?e._features.push(r.pos):t===3?e._keys.push(r.readString()):t===4&&e._values.push(Kn(r))}function Kn(t){for(var e=null,r=t.readVarint()+t.pos;t.pos<r;){var n=t.readVarint()>>3;e=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null}return e}gr.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Hn(this._pbf,e,this.extent,this._keys,this._values)}});var vr=J((Ms,wr)=>{"use strict";var Gn=Ft();wr.exports=Qn;function Qn(t,e){this.layers=t.readFields(ei,{},e)}function ei(t,e,r){if(t===3){var n=new Gn(r,r.readVarint()+r.pos);n.length&&(e[n.name]=n)}}});var _r=J((Ts,tt)=>{tt.exports.VectorTile=vr();tt.exports.VectorTileFeature=kt();tt.exports.VectorTileLayer=Ft()});var zr=J(St=>{St.read=function(t,e,r,n,i){var s,o,a=i*8-n-1,l=(1<<a)-1,u=l>>1,h=-7,d=r?i-1:0,m=r?-1:1,b=t[e+d];for(d+=m,s=b&(1<<-h)-1,b>>=-h,h+=a;h>0;s=s*256+t[e+d],d+=m,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=n;h>0;o=o*256+t[e+d],d+=m,h-=8);if(s===0)s=1-u;else{if(s===l)return o?NaN:(b?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-u}return(b?-1:1)*o*Math.pow(2,s-n)};St.write=function(t,e,r,n,i,s){var o,a,l,u=s*8-i-1,h=(1<<u)-1,d=h>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=n?0:s-1,w=n?1:-1,k=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+d>=1?e+=m/l:e+=m*Math.pow(2,1-d),e*l>=2&&(o++,l/=2),o+d>=h?(a=0,o=h):o+d>=1?(a=(e*l-1)*Math.pow(2,i),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;t[r+b]=a&255,b+=w,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;t[r+b]=o&255,b+=w,o/=256,u-=8);t[r+b-w]|=k*128}});var Mr=J((Ds,Cr)=>{"use strict";Cr.exports=S;var rt=zr();function S(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}S.Varint=0;S.Fixed64=1;S.Bytes=2;S.Fixed32=5;var Ct=(1<<16)*(1<<16),Lr=1/Ct,ti=12,Sr=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");S.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,s=this.pos;this.type=n&7,t(i,e,this),this.pos===s&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=nt(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Fr(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=nt(this.buf,this.pos)+nt(this.buf,this.pos+4)*Ct;return this.pos+=8,t},readSFixed64:function(){var t=nt(this.buf,this.pos)+Fr(this.buf,this.pos+4)*Ct;return this.pos+=8,t},readFloat:function(){var t=rt.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=rt.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e=this.buf,r,n;return n=e[this.pos++],r=n&127,n<128||(n=e[this.pos++],r|=(n&127)<<7,n<128)||(n=e[this.pos++],r|=(n&127)<<14,n<128)||(n=e[this.pos++],r|=(n&127)<<21,n<128)?r:(n=e[this.pos],r|=(n&15)<<28,ri(r,t,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=ti&&Sr?yi(this.buf,e,t):pi(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==S.Bytes)return t.push(this.readVarint(e));var r=se(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==S.Bytes)return t.push(this.readSVarint());var e=se(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==S.Bytes)return t.push(this.readBoolean());var e=se(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==S.Bytes)return t.push(this.readFloat());var e=se(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==S.Bytes)return t.push(this.readDouble());var e=se(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==S.Bytes)return t.push(this.readFixed32());var e=se(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==S.Bytes)return t.push(this.readSFixed32());var e=se(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==S.Bytes)return t.push(this.readFixed64());var e=se(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==S.Bytes)return t.push(this.readSFixed64());var e=se(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=t&7;if(e===S.Varint)for(;this.buf[this.pos++]>127;);else if(e===S.Bytes)this.pos=this.readVarint()+this.pos;else if(e===S.Fixed32)this.pos+=4;else if(e===S.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+e)},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),ke(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),ke(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),ke(this.buf,t&-1,this.pos),ke(this.buf,Math.floor(t*Lr),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),ke(this.buf,t&-1,this.pos),ke(this.buf,Math.floor(t*Lr),this.pos+4),this.pos+=8},writeVarint:function(t){if(t=+t||0,t>268435455||t<0){ni(t,this);return}this.realloc(4),this.buf[this.pos++]=t&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=t>>>7&127)))},writeSVarint:function(t){this.writeVarint(t<0?-t*2-1:t*2)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(t.length*4),this.pos++;var e=this.pos;this.pos=xi(this.buf,t,this.pos);var r=this.pos-e;r>=128&&kr(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),rt.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),rt.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&kr(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,S.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,oi,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,ai,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,hi,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,li,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,ui,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,ci,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,fi,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,di,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,mi,e)},writeBytesField:function(t,e){this.writeTag(t,S.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,S.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,S.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,S.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,S.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,S.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,S.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,S.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,S.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,S.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};function ri(t,e,r){var n=r.buf,i,s;if(s=n[r.pos++],i=(s&112)>>4,s<128||(s=n[r.pos++],i|=(s&127)<<3,s<128)||(s=n[r.pos++],i|=(s&127)<<10,s<128)||(s=n[r.pos++],i|=(s&127)<<17,s<128)||(s=n[r.pos++],i|=(s&127)<<24,s<128)||(s=n[r.pos++],i|=(s&1)<<31,s<128))return Le(t,i,e);throw new Error("Expected varint not more than 10 bytes")}function se(t){return t.type===S.Bytes?t.readVarint()+t.pos:t.pos+1}function Le(t,e,r){return r?e*4294967296+(t>>>0):(e>>>0)*4294967296+(t>>>0)}function ni(t,e){var r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(r=~(-t%4294967296),n=~(-t/4294967296),r^4294967295?r=r+1|0:(r=0,n=n+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),ii(r,n,e),si(n,e)}function ii(t,e,r){r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos]=t&127}function si(t,e){var r=(t&7)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127)))))}function kr(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function oi(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function ai(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function li(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function ui(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function hi(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function ci(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function fi(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function di(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function mi(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function nt(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+t[e+3]*16777216}function ke(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function Fr(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function pi(t,e,r){for(var n="",i=e;i<r;){var s=t[i],o=null,a=s>239?4:s>223?3:s>191?2:1;if(i+a>r)break;var l,u,h;a===1?s<128&&(o=s):a===2?(l=t[i+1],(l&192)===128&&(o=(s&31)<<6|l&63,o<=127&&(o=null))):a===3?(l=t[i+1],u=t[i+2],(l&192)===128&&(u&192)===128&&(o=(s&15)<<12|(l&63)<<6|u&63,(o<=2047||o>=55296&&o<=57343)&&(o=null))):a===4&&(l=t[i+1],u=t[i+2],h=t[i+3],(l&192)===128&&(u&192)===128&&(h&192)===128&&(o=(s&15)<<18|(l&63)<<12|(u&63)<<6|h&63,(o<=65535||o>=1114112)&&(o=null))),o===null?(o=65533,a=1):o>65535&&(o-=65536,n+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),n+=String.fromCharCode(o),i+=a}return n}function yi(t,e,r){return Sr.decode(t.subarray(e,r))}function xi(t,e,r){for(var n=0,i,s;n<e.length;n++){if(i=e.charCodeAt(n),i>55295&&i<57344)if(s)if(i<56320){t[r++]=239,t[r++]=191,t[r++]=189,s=i;continue}else i=s-55296<<10|i-56320|65536,s=null;else{i>56319||n+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):s=i;continue}else s&&(t[r++]=239,t[r++]=191,t[r++]=189,s=null);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:(i<65536?t[r++]=i>>12|224:(t[r++]=i>>18|240,t[r++]=i>>12&63|128),t[r++]=i>>6&63|128),t[r++]=i&63|128)}return r}});var dn=J((Yt,Vt)=>{(function(t,e){typeof Yt=="object"&&typeof Vt!="undefined"?Vt.exports=e():typeof define=="function"&&define.amd?define(e):(t=t||self).RBush=e()})(Yt,function(){"use strict";function t(c,f,p,g,y){(function x(_,v,z,F,P){for(;F>z;){if(F-z>600){var T=F-z+1,B=v-z+1,Z=Math.log(T),q=.5*Math.exp(2*Z/3),ne=.5*Math.sqrt(Z*q*(T-q)/T)*(B-T/2<0?-1:1),Y=Math.max(z,Math.floor(v-B*q/T+ne)),yt=Math.min(F,Math.floor(v+(T-B)*q/T+ne));x(_,v,Y,yt,P)}var ye=_[v],ie=z,R=F;for(e(_,z,v),P(_[F],ye)>0&&e(_,z,F);ie<R;){for(e(_,ie,R),ie++,R--;P(_[ie],ye)<0;)ie++;for(;P(_[R],ye)>0;)R--}P(_[z],ye)===0?e(_,z,R):e(_,++R,F),R<=v&&(z=R+1),v<=R&&(F=R-1)}})(c,f,p||0,g||c.length-1,y||r)}function e(c,f,p){var g=c[f];c[f]=c[p],c[p]=g}function r(c,f){return c<f?-1:c>f?1:0}var n=function(c){c===void 0&&(c=9),this._maxEntries=Math.max(4,c),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(c,f,p){if(!p)return f.indexOf(c);for(var g=0;g<f.length;g++)if(p(c,f[g]))return g;return-1}function s(c,f){o(c,0,c.children.length,f,c)}function o(c,f,p,g,y){y||(y=w(null)),y.minX=1/0,y.minY=1/0,y.maxX=-1/0,y.maxY=-1/0;for(var x=f;x<p;x++){var _=c.children[x];a(y,c.leaf?g(_):_)}return y}function a(c,f){return c.minX=Math.min(c.minX,f.minX),c.minY=Math.min(c.minY,f.minY),c.maxX=Math.max(c.maxX,f.maxX),c.maxY=Math.max(c.maxY,f.maxY),c}function l(c,f){return c.minX-f.minX}function u(c,f){return c.minY-f.minY}function h(c){return(c.maxX-c.minX)*(c.maxY-c.minY)}function d(c){return c.maxX-c.minX+(c.maxY-c.minY)}function m(c,f){return c.minX<=f.minX&&c.minY<=f.minY&&f.maxX<=c.maxX&&f.maxY<=c.maxY}function b(c,f){return f.minX<=c.maxX&&f.minY<=c.maxY&&f.maxX>=c.minX&&f.maxY>=c.minY}function w(c){return{children:c,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function k(c,f,p,g,y){for(var x=[f,p];x.length;)if(!((p=x.pop())-(f=x.pop())<=g)){var _=f+Math.ceil((p-f)/g/2)*g;t(c,_,f,p,y),x.push(f,_,_,p)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(c){var f=this.data,p=[];if(!b(c,f))return p;for(var g=this.toBBox,y=[];f;){for(var x=0;x<f.children.length;x++){var _=f.children[x],v=f.leaf?g(_):_;b(c,v)&&(f.leaf?p.push(_):m(c,v)?this._all(_,p):y.push(_))}f=y.pop()}return p},n.prototype.collides=function(c){var f=this.data;if(!b(c,f))return!1;for(var p=[];f;){for(var g=0;g<f.children.length;g++){var y=f.children[g],x=f.leaf?this.toBBox(y):y;if(b(c,x)){if(f.leaf||m(c,x))return!0;p.push(y)}}f=p.pop()}return!1},n.prototype.load=function(c){if(!c||!c.length)return this;if(c.length<this._minEntries){for(var f=0;f<c.length;f++)this.insert(c[f]);return this}var p=this._build(c.slice(),0,c.length-1,0);if(this.data.children.length)if(this.data.height===p.height)this._splitRoot(this.data,p);else{if(this.data.height<p.height){var g=this.data;this.data=p,p=g}this._insert(p,this.data.height-p.height-1,!0)}else this.data=p;return this},n.prototype.insert=function(c){return c&&this._insert(c,this.data.height-1),this},n.prototype.clear=function(){return this.data=w([]),this},n.prototype.remove=function(c,f){if(!c)return this;for(var p,g,y,x=this.data,_=this.toBBox(c),v=[],z=[];x||v.length;){if(x||(x=v.pop(),g=v[v.length-1],p=z.pop(),y=!0),x.leaf){var F=i(c,x.children,f);if(F!==-1)return x.children.splice(F,1),v.push(x),this._condense(v),this}y||x.leaf||!m(x,_)?g?(p++,x=g.children[p],y=!1):x=null:(v.push(x),z.push(p),p=0,g=x,x=x.children[0])}return this},n.prototype.toBBox=function(c){return c},n.prototype.compareMinX=function(c,f){return c.minX-f.minX},n.prototype.compareMinY=function(c,f){return c.minY-f.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(c){return this.data=c,this},n.prototype._all=function(c,f){for(var p=[];c;)c.leaf?f.push.apply(f,c.children):p.push.apply(p,c.children),c=p.pop();return f},n.prototype._build=function(c,f,p,g){var y,x=p-f+1,_=this._maxEntries;if(x<=_)return s(y=w(c.slice(f,p+1)),this.toBBox),y;g||(g=Math.ceil(Math.log(x)/Math.log(_)),_=Math.ceil(x/Math.pow(_,g-1))),(y=w([])).leaf=!1,y.height=g;var v=Math.ceil(x/_),z=v*Math.ceil(Math.sqrt(_));k(c,f,p,z,this.compareMinX);for(var F=f;F<=p;F+=z){var P=Math.min(F+z-1,p);k(c,F,P,v,this.compareMinY);for(var T=F;T<=P;T+=v){var B=Math.min(T+v-1,P);y.children.push(this._build(c,T,B,g-1))}}return s(y,this.toBBox),y},n.prototype._chooseSubtree=function(c,f,p,g){for(;g.push(f),!f.leaf&&g.length-1!==p;){for(var y=1/0,x=1/0,_=void 0,v=0;v<f.children.length;v++){var z=f.children[v],F=h(z),P=(T=c,B=z,(Math.max(B.maxX,T.maxX)-Math.min(B.minX,T.minX))*(Math.max(B.maxY,T.maxY)-Math.min(B.minY,T.minY))-F);P<x?(x=P,y=F<y?F:y,_=z):P===x&&F<y&&(y=F,_=z)}f=_||f.children[0]}var T,B;return f},n.prototype._insert=function(c,f,p){var g=p?c:this.toBBox(c),y=[],x=this._chooseSubtree(g,this.data,f,y);for(x.children.push(c),a(x,g);f>=0&&y[f].children.length>this._maxEntries;)this._split(y,f),f--;this._adjustParentBBoxes(g,y,f)},n.prototype._split=function(c,f){var p=c[f],g=p.children.length,y=this._minEntries;this._chooseSplitAxis(p,y,g);var x=this._chooseSplitIndex(p,y,g),_=w(p.children.splice(x,p.children.length-x));_.height=p.height,_.leaf=p.leaf,s(p,this.toBBox),s(_,this.toBBox),f?c[f-1].children.push(_):this._splitRoot(p,_)},n.prototype._splitRoot=function(c,f){this.data=w([c,f]),this.data.height=c.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(c,f,p){for(var g,y,x,_,v,z,F,P=1/0,T=1/0,B=f;B<=p-f;B++){var Z=o(c,0,B,this.toBBox),q=o(c,B,p,this.toBBox),ne=(y=Z,x=q,_=void 0,v=void 0,z=void 0,F=void 0,_=Math.max(y.minX,x.minX),v=Math.max(y.minY,x.minY),z=Math.min(y.maxX,x.maxX),F=Math.min(y.maxY,x.maxY),Math.max(0,z-_)*Math.max(0,F-v)),Y=h(Z)+h(q);ne<P?(P=ne,g=B,T=Y<T?Y:T):ne===P&&Y<T&&(T=Y,g=B)}return g||p-f},n.prototype._chooseSplitAxis=function(c,f,p){var g=c.leaf?this.compareMinX:l,y=c.leaf?this.compareMinY:u;this._allDistMargin(c,f,p,g)<this._allDistMargin(c,f,p,y)&&c.children.sort(g)},n.prototype._allDistMargin=function(c,f,p,g){c.children.sort(g);for(var y=this.toBBox,x=o(c,0,f,y),_=o(c,p-f,p,y),v=d(x)+d(_),z=f;z<p-f;z++){var F=c.children[z];a(x,c.leaf?y(F):F),v+=d(x)}for(var P=p-f-1;P>=f;P--){var T=c.children[P];a(_,c.leaf?y(T):T),v+=d(_)}return v},n.prototype._adjustParentBBoxes=function(c,f,p){for(var g=p;g>=0;g--)a(f[g],c)},n.prototype._condense=function(c){for(var f=c.length-1,p=void 0;f>=0;f--)c[f].children.length===0?f>0?(p=c[f-1].children).splice(p.indexOf(c[f]),1):this.clear():s(c[f],this.toBBox)},n})});var ms={};Cn(ms,{CenteredSymbolizer:()=>ut,CenteredTextSymbolizer:()=>I,CircleSymbolizer:()=>W,FlexSymbolizer:()=>Te,Font:()=>Zt,GeomType:()=>lt,GroupSymbolizer:()=>ce,IconSymbolizer:()=>Xt,Index:()=>ft,Justify:()=>Et,Labeler:()=>Be,Labelers:()=>Re,LineLabelPlacement:()=>cn,LineLabelSymbolizer:()=>le,LineSymbolizer:()=>M,OffsetSymbolizer:()=>ht,OffsetTextSymbolizer:()=>te,PMTiles:()=>st,Padding:()=>Ot,PmtilesSource:()=>Me,PolygonLabelSymbolizer:()=>re,PolygonSymbolizer:()=>D,Sheet:()=>Nt,ShieldSymbolizer:()=>Ze,Static:()=>$t,TextPlacements:()=>on,TextSymbolizer:()=>Pe,TileCache:()=>Ne,Toner:()=>ds,View:()=>ct,ZxySource:()=>je,arr:()=>fe,covering:()=>yn,createPattern:()=>It,cubicBezier:()=>is,dark:()=>ge,exp:()=>U,filterFn:()=>Ge,getFont:()=>Ht,getZoom:()=>Ut,isCCW:()=>Gr,isInRing:()=>Rt,json_style:()=>fs,labelRules:()=>Ae,leafletLayer:()=>hs,light:()=>be,linear:()=>ns,numberFn:()=>pt,numberOrFn:()=>qt,paintRules:()=>De,painter:()=>Je,pointInPolygon:()=>Qr,pointMinDistToLines:()=>tn,pointMinDistToPoints:()=>en,sourcesToViews:()=>He,step:()=>rs,toIndex:()=>ae,transformGeom:()=>We,widthFn:()=>Wt,wrap:()=>qe});var ue=$(ee());var ge={earth:"#151515",glacier:"#1c1c1c",residential:"#252B2F",hospital:"#3E2C2C",cemetery:"#36483D",school:"#2C3440",industrial:"#33312C",wood:"#3A3E38",grass:"#4E604D",park:"#2C4034",water:"#4D5B73",sand:"#777777",buildings:"#464545",highwayCasing:"#000000",majorRoadCasing:"#1C1B1B",mediumRoadCasing:"#3E3E3E",minorRoadCasing:"#000000",highway:"#5B5B5B",majorRoad:"#595959",mediumRoad:"#4F4F4F",minorRoad:"#393939",boundaries:"#666666",mask:"#dddddd",countryLabel:"#ffffff",cityLabel:"#FFFFFF",stateLabel:"#ffffff",neighbourhoodLabel:"#FDFDFD",landuseLabel:"#DDDDDD",waterLabel:"#707E95",naturalLabel:"#4c4c4c",roadsLabel:"#C4C4C4",poisLabel:"#959393"};var be={earth:"#FFFBF6",glacier:"#ffffff",residential:"#F4F4F8",hospital:"#FFF6F6",cemetery:"#EFF2EE",school:"#F7F6FF",industrial:"#FFF9EF",wood:"#F4F9EF",grass:"#EBF9E3",park:"#E5F9D5",water:"#B7DFF2",sand:"#ebebeb",buildings:"#F2EDE8",highwayCasing:"#FFC3C3",majorRoadCasing:"#FFB9B9",mediumRoadCasing:"#FFCE8E",minorRoadCasing:"#cccccc",highway:"#FFCEBB",majorRoad:"#FFE4B3",mediumRoad:"#FFF2C8",minorRoad:"#ffffff",boundaries:"#9e9e9e",mask:"#dddddd",countryLabel:"#aaaaaa",cityLabel:"#6C6C6C",stateLabel:"#999999",neighbourhoodLabel:"#888888",landuseLabel:"#898989",waterLabel:"#41ABDC",naturalLabel:"#4B8F14",roadsLabel:"#888888",poisLabel:"#606060"};function Ee(t,e,r){return Math.min(Math.max(t,r),e)}var de=class extends Error{constructor(e){super(`Failed to parse color: "${e}"`)}};function Tn(t){if(typeof t!="string")throw new de(t);if(t.trim().toLowerCase()==="transparent")return[0,0,0,0];let e=t.trim();e=Xn.test(t)?function(o){let a=o.toLowerCase().trim(),l=Pn[function(u){let h=5381,d=u.length;for(;d;)h=33*h^u.charCodeAt(--d);return(h>>>0)%2341}(a)];if(!l)throw new de(o);return`#${l}`}(t):t;let r=Dn.exec(e);if(r){let o=Array.from(r).slice(1);return[...o.slice(0,3).map(a=>parseInt(Ie(a,2),16)),parseInt(Ie(o[3]||"f",2),16)/255]}let n=An.exec(e);if(n){let o=Array.from(n).slice(1);return[...o.slice(0,3).map(a=>parseInt(a,16)),parseInt(o[3]||"ff",16)/255]}let i=Bn.exec(e);if(i){let o=Array.from(i).slice(1);return[...o.slice(0,3).map(a=>parseInt(a,10)),parseFloat(o[3]||"1")]}let s=Rn.exec(e);if(s){let[o,a,l,u]=Array.from(s).slice(1).map(parseFloat);if(Ee(0,100,a)!==a)throw new de(t);if(Ee(0,100,l)!==l)throw new de(t);return[...On(o,a,l),u||1]}throw new de(t)}var ar=t=>parseInt(t.replace(/_/g,""),36),Pn="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((t,e)=>{let r=ar(e.substring(0,3)),n=ar(e.substring(3)).toString(16),i="";for(let s=0;s<6-n.length;s++)i+="0";return t[r]=`${i}${n}`,t},{}),Ie=(t,e)=>Array.from(Array(e)).map(()=>t).join(""),Dn=new RegExp(`^#${Ie("([a-f0-9])",3)}([a-f0-9])?$`,"i"),An=new RegExp(`^#${Ie("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),Bn=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${Ie(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),Rn=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,Xn=/^[a-z]+$/i,lr=t=>Math.round(255*t),On=(t,e,r)=>{let n=r/100;if(e===0)return[n,n,n].map(lr);let i=(t%360+360)%360/60,s=(1-Math.abs(2*n-1))*(e/100),o=s*(1-Math.abs(i%2-1)),a=0,l=0,u=0;i>=0&&i<1?(a=s,l=o):i>=1&&i<2?(a=o,l=s):i>=2&&i<3?(l=s,u=o):i>=3&&i<4?(l=o,u=s):i>=4&&i<5?(a=o,u=s):i>=5&&i<6&&(a=s,u=o);let h=n-s/2;return[a+h,l+h,u+h].map(lr)};function bt(t){let[e,r,n,i]=Tn(t).map((u,h)=>h===3?u:u/255),s=Math.max(e,r,n),o=Math.min(e,r,n),a=(s+o)/2;if(s===o)return[0,0,a,i];let l=s-o;return[60*(e===s?(r-n)/l+(r<n?6:0):r===s?(n-e)/l+2:(e-r)/l+4),a>.5?l/(2-s-o):l/(s+o),a,i]}function ur(t,e,r,n){return`hsla(${(t%360).toFixed()}, ${Ee(0,100,100*e).toFixed()}%, ${Ee(0,100,100*r).toFixed()}%, ${parseFloat(Ee(0,1,n).toFixed(3))})`}var N=$(ee()),rn=$(cr()),nn=$(mr());var E=class{constructor(e,r){this.str=e!=null?e:r,this.per_feature=typeof this.str=="function"&&this.str.length===2}get(e,r){return typeof this.str=="function"?this.str(e,r):this.str}},A=class{constructor(e,r=1){this.value=e!=null?e:r,this.per_feature=typeof this.value=="function"&&this.value.length===2}get(e,r){return typeof this.value=="function"?this.value(e,r):this.value}},ve=class{constructor(e){var r;this.label_props=(r=e==null?void 0:e.label_props)!=null?r:["name"],this.textTransform=e==null?void 0:e.textTransform}get(e,r){let n,i;typeof this.label_props=="function"?i=this.label_props(e,r):i=this.label_props;for(let o of i)if(r.props.hasOwnProperty(o)&&typeof r.props[o]=="string"){n=r.props[o];break}let s;return typeof this.textTransform=="function"?s=this.textTransform(e,r):s=this.textTransform,n&&s==="uppercase"?n=n.toUpperCase():n&&s==="lowercase"?n=n.toLowerCase():n&&s==="capitalize"&&(n=n.toLowerCase().split(" ").map(l=>l[0].toUpperCase()+l.slice(1)).join(" ")),n}},_e=class{constructor(e){var r,n;e!=null&&e.font?this.font=e.font:(this.family=(r=e==null?void 0:e.fontFamily)!=null?r:"sans-serif",this.size=(n=e==null?void 0:e.fontSize)!=null?n:12,this.weight=e==null?void 0:e.fontWeight,this.style=e==null?void 0:e.fontStyle)}get(e,r){if(this.font)return typeof this.font=="function"?this.font(e,r):this.font;let n="";this.style&&(typeof this.style=="function"?n=`${this.style(e,r)} `:n=`${this.style} `);let i="";this.weight&&(typeof this.weight=="function"?i=`${this.weight(e,r)} `:i=`${this.weight} `);let s;typeof this.size=="function"?s=this.size(e,r):s=this.size;let o;return typeof this.family=="function"?o=this.family(e,r):o=this.family,`${n}${i}${s}px ${o}`}},et=class{constructor(e,r=[]){this.value=e!=null?e:r,this.per_feature=typeof this.value=="function"&&this.value.length===2}get(e,r){return typeof this.value=="function"?this.value(e,r):this.value}};var zt=$(ee());var Un=(t,e,r)=>{let n=[],i,s,o,a=0,l=0,u=0,h=0,d=0,m=0,b=0,w=0,k=0,c=0,f=0,p=0;if(t.length<2)return[];if(t.length===2)return u=Math.sqrt(X(t[1].x-t[0].x,2)+X(t[1].y-t[0].y,2)),[{length:u,beginIndex:0,beginDistance:0,endIndex:2,endDistance:u}];for(h=Math.sqrt(X(t[1].x-t[0].x,2)+X(t[1].y-t[0].y,2)),a=1,l=t.length-1;a<l;a++)i=t[a-1],s=t[a],o=t[a+1],m=s.x-i.x,b=s.y-i.y,w=o.x-s.x,k=o.y-s.y,d=Math.sqrt(w*w+k*k),u+=h,c=Math.acos((m*w+b*k)/(h*d)),(c>e||u-p>r)&&(n.push({length:u-p,beginDistance:p,beginIndex:f,endIndex:a+1,endDistance:u}),f=a,p=u),h=d;return a-f>0&&n.push({length:u-p+d,beginIndex:f,beginDistance:p,endIndex:a+1,endDistance:u+d}),n};function pr(t,e,r,n){let s=[];for(let a of t){let l=Un(a,Math.PI/45,e);for(let u of l)if(u.length>=e+n){let h=new zt.default(a[u.beginIndex].x,a[u.beginIndex].y),d=a[u.endIndex-1],m=new zt.default((d.x-h.x)/u.length,(d.y-h.y)/u.length);for(let b=n;b<u.length-e;b+=r)s.push({start:h.add(m.mult(b)),end:h.add(m.mult(b+e))})}}return s}function yr(t,e,r,n){let i=e.x-t.x,s=e.y-t.y,o=Math.sqrt(X(e.x-t.x,2)+X(e.y-t.y,2)),a=[];for(let l=0;l<r+n;l+=2*n){let u=l*1/o;a.push({x:t.x+u*i,y:t.y+u*s})}return a}function Lt(t,e){if(t.length<=e)return[t];let r=e-1,n=t.lastIndexOf(" ",r),i=t.indexOf(" ",r);if(n===-1&&i===-1)return[t];let s,o;return i===-1||n>=0&&r-n<i-r?(s=t.substring(0,n),o=t.substring(n+1,t.length)):(s=t.substring(0,i),o=t.substring(i+1,t.length)),[s,...Lt(o,e)]}var $n="\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DB5\u4E00-\u9FEA\uF900-\uFA6D\uFA70-\uFAD9\u2000",ks=new RegExp(`^[${$n}]+$`);var Ce=$(ee()),Hr=$(_r()),Jr=$(Mr());var V=(t,e,r)=>new Promise((n,i)=>{var s=l=>{try{a(r.next(l))}catch(u){i(u)}},o=l=>{try{a(r.throw(l))}catch(u){i(u)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,o);a((r=r.apply(t,e)).next())}),j=Uint8Array,me=Uint16Array,Dr=Uint32Array,Ar=new j([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Br=new j([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),gi=new j([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Rr=function(t,e){for(var r=new me(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var i=new Dr(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)i[s]=s-r[n]<<5|n;return[r,i]},Xr=Rr(Ar,2),Or=Xr[0],bi=Xr[1];Or[28]=258,bi[258]=28;var Er=Rr(Br,0),wi=Er[0],As=Er[1],Pt=new me(32768);for(C=0;C<32768;++C)oe=(C&43690)>>>1|(C&21845)<<1,oe=(oe&52428)>>>2|(oe&13107)<<2,oe=(oe&61680)>>>4|(oe&3855)<<4,Pt[C]=((oe&65280)>>>8|(oe&255)<<8)>>>1;var oe,C,Ue=function(t,e,r){for(var n=t.length,i=0,s=new me(e);i<n;++i)t[i]&&++s[t[i]-1];var o=new me(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(r){a=new me(1<<e);var l=15-e;for(i=0;i<n;++i)if(t[i])for(var u=i<<4|t[i],h=e-t[i],d=o[t[i]-1]++<<h,m=d|(1<<h)-1;d<=m;++d)a[Pt[d]>>>l]=u}else for(a=new me(n),i=0;i<n;++i)t[i]&&(a[i]=Pt[o[t[i]-1]++]>>>15-t[i]);return a},$e=new j(288);for(C=0;C<144;++C)$e[C]=8;var C;for(C=144;C<256;++C)$e[C]=9;var C;for(C=256;C<280;++C)$e[C]=7;var C;for(C=280;C<288;++C)$e[C]=8;var C,Ir=new j(32);for(C=0;C<32;++C)Ir[C]=5;var C,vi=Ue($e,9,1),_i=Ue(Ir,5,1),Mt=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},K=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},Tt=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},zi=function(t){return(t+7)/8|0},Li=function(t,e,r){(e==null||e<0)&&(e=0),(r==null||r>t.length)&&(r=t.length);var n=new(t.BYTES_PER_ELEMENT==2?me:t.BYTES_PER_ELEMENT==4?Dr:j)(r-e);return n.set(t.subarray(e,r)),n},ki=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Q=function(t,e,r){var n=new Error(e||ki[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,Q),!r)throw n;return n},At=function(t,e,r){var n=t.length;if(!n||r&&r.f&&!r.l)return e||new j(0);var i=!e||r,s=!r||r.i;r||(r={}),e||(e=new j(n*3));var o=function(Gt){var Qt=e.length;if(Gt>Qt){var er=new j(Math.max(Qt*2,Gt));er.set(e),e=er}},a=r.f||0,l=r.p||0,u=r.b||0,h=r.l,d=r.d,m=r.m,b=r.n,w=n*8;do{if(!h){a=K(t,l,1);var k=K(t,l+1,3);if(l+=3,k)if(k==1)h=vi,d=_i,m=9,b=5;else if(k==2){var g=K(t,l,31)+257,y=K(t,l+10,15)+4,x=g+K(t,l+5,31)+1;l+=14;for(var _=new j(x),v=new j(19),z=0;z<y;++z)v[gi[z]]=K(t,l+z*3,7);l+=y*3;for(var F=Mt(v),P=(1<<F)-1,T=Ue(v,F,1),z=0;z<x;){var B=T[K(t,l,P)];l+=B&15;var c=B>>>4;if(c<16)_[z++]=c;else{var Z=0,q=0;for(c==16?(q=3+K(t,l,3),l+=2,Z=_[z-1]):c==17?(q=3+K(t,l,7),l+=3):c==18&&(q=11+K(t,l,127),l+=7);q--;)_[z++]=Z}}var ne=_.subarray(0,g),Y=_.subarray(g);m=Mt(ne),b=Mt(Y),h=Ue(ne,m,1),d=Ue(Y,b,1)}else Q(1);else{var c=zi(l)+4,f=t[c-4]|t[c-3]<<8,p=c+f;if(p>n){s&&Q(0);break}i&&o(u+f),e.set(t.subarray(c,p),u),r.b=u+=f,r.p=l=p*8,r.f=a;continue}if(l>w){s&&Q(0);break}}i&&o(u+131072);for(var yt=(1<<m)-1,ye=(1<<b)-1,ie=l;;ie=l){var Z=h[Tt(t,l)&yt],R=Z>>>4;if(l+=Z&15,l>w){s&&Q(0);break}if(Z||Q(2),R<256)e[u++]=R;else if(R==256){ie=l,h=null;break}else{var Jt=R-254;if(R>264){var z=R-257,Xe=Ar[z];Jt=K(t,l,(1<<Xe)-1)+Or[z],l+=Xe}var xt=d[Tt(t,l)&ye],gt=xt>>>4;xt||Q(3),l+=xt&15;var Y=wi[gt];if(gt>3){var Xe=Br[gt];Y+=Tt(t,l)&(1<<Xe)-1,l+=Xe}if(l>w){s&&Q(0);break}i&&o(u+131072);for(var Kt=u+Jt;u<Kt;u+=4)e[u]=e[u-Y],e[u+1]=e[u+1-Y],e[u+2]=e[u+2-Y],e[u+3]=e[u+3-Y];u=Kt}}r.l=h,r.p=ie,r.b=u,r.f=a,h&&(a=1,r.m=m,r.d=d,r.n=b)}while(!a);return u==e.length?e:Li(e,0,u)},Fi=new j(0),Si=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&Q(6,"invalid gzip data");var e=t[3],r=10;e&4&&(r+=t[10]|(t[11]<<8)+2);for(var n=(e>>3&1)+(e>>4&1);n>0;n-=!t[r++]);return r+(e&2)},Ci=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},Mi=function(t){((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)&&Q(6,"invalid zlib data"),t[1]&32&&Q(6,"invalid zlib data: preset dictionaries not supported")};function Ti(t,e){return At(t,e)}function Pi(t,e){return At(t.subarray(Si(t),-8),e||new j(Ci(t)))}function Di(t,e){return At((Mi(t),t.subarray(2,-4)),e)}function Dt(t,e){return t[0]==31&&t[1]==139&&t[2]==8?Pi(t,e):(t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31?Ti(t,e):Di(t,e)}var Ai=typeof TextDecoder!="undefined"&&new TextDecoder,Bi=0;try{Ai.decode(Fi,{stream:!0}),Bi=1}catch(t){}var Yr=(t,e)=>t*Math.pow(2,e),Ye=(t,e)=>Math.floor(t/Math.pow(2,e)),it=(t,e)=>Yr(t.getUint16(e+1,!0),8)+t.getUint8(e),Vr=(t,e)=>Yr(t.getUint32(e+2,!0),16)+t.getUint16(e,!0),Ri=(t,e,r,n,i)=>{if(t!=n.getUint8(i))return t-n.getUint8(i);let s=it(n,i+1);if(e!=s)return e-s;let o=it(n,i+4);return r!=o?r-o:0},Xi=(t,e,r,n)=>{let i=Ur(t,e|128,r,n);return i?{z:e,x:r,y:n,offset:i[0],length:i[1],is_dir:!0}:null},Tr=(t,e,r,n)=>{let i=Ur(t,e,r,n);return i?{z:e,x:r,y:n,offset:i[0],length:i[1],is_dir:!1}:null},Ur=(t,e,r,n)=>{let i=0,s=t.byteLength/17-1;for(;i<=s;){let o=s+i>>1,a=Ri(e,r,n,t,o*17);if(a>0)i=o+1;else if(a<0)s=o-1;else return[Vr(t,o*17+7),t.getUint32(o*17+13,!0)]}return null},Oi=(t,e)=>t.is_dir&&!e.is_dir?1:!t.is_dir&&e.is_dir?-1:t.z!==e.z?t.z-e.z:t.x!==e.x?t.x-e.x:t.y-e.y,$r=(t,e)=>{let r=t.getUint8(e*17);return{z:r&127,x:it(t,e*17+1),y:it(t,e*17+4),offset:Vr(t,e*17+7),length:t.getUint32(e*17+13,!0),is_dir:r>>7===1}},Pr=t=>{let e=[],r=new DataView(t);for(let n=0;n<r.byteLength/17;n++)e.push($r(r,n));return Ei(e)},Ei=t=>{t.sort(Oi);let e=new ArrayBuffer(17*t.length),r=new Uint8Array(e);for(let n=0;n<t.length;n++){let i=t[n],s=i.z;i.is_dir&&(s=s|128),r[n*17]=s,r[n*17+1]=i.x&255,r[n*17+2]=i.x>>8&255,r[n*17+3]=i.x>>16&255,r[n*17+4]=i.y&255,r[n*17+5]=i.y>>8&255,r[n*17+6]=i.y>>16&255,r[n*17+7]=i.offset&255,r[n*17+8]=Ye(i.offset,8)&255,r[n*17+9]=Ye(i.offset,16)&255,r[n*17+10]=Ye(i.offset,24)&255,r[n*17+11]=Ye(i.offset,32)&255,r[n*17+12]=Ye(i.offset,48)&255,r[n*17+13]=i.length&255,r[n*17+14]=i.length>>8&255,r[n*17+15]=i.length>>16&255,r[n*17+16]=i.length>>24&255}return e},Ii=(t,e)=>{if(t.byteLength<17)return null;let r=t.byteLength/17,n=$r(t,r-1);if(n.is_dir){let i=n.z,s=e.z-i,o=Math.trunc(e.x/(1<<s)),a=Math.trunc(e.y/(1<<s));return{z:i,x:o,y:a}}return null};function Yi(t){return V(this,null,function*(){let e=yield t.getBytes(0,512e3),r=new DataView(e.data),n=r.getUint32(4,!0),i=r.getUint16(8,!0),s=new TextDecoder("utf-8"),o=JSON.parse(s.decode(new DataView(e.data,10,n))),a=0;o.compression==="gzip"&&(a=2);let l=0;"minzoom"in o&&(l=+o.minzoom);let u=0;"maxzoom"in o&&(u=+o.maxzoom);let h=0,d=0,m=0,b=-180,w=-85,k=180,c=85;if(o.bounds){let p=o.bounds.split(",");b=+p[0],w=+p[1],k=+p[2],c=+p[3]}if(o.center){let p=o.center.split(",");h=+p[0],d=+p[1],m=+p[2]}return{specVersion:r.getUint16(2,!0),rootDirectoryOffset:10+n,rootDirectoryLength:i*17,jsonMetadataOffset:10,jsonMetadataLength:n,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:a,tileType:1,minZoom:l,maxZoom:u,minLon:b,minLat:w,maxLon:k,maxLat:c,centerZoom:m,centerLon:h,centerLat:d,etag:e.etag}})}function Vi(t,e,r,n,i,s,o){return V(this,null,function*(){let a=yield r.getArrayBuffer(e,t.rootDirectoryOffset,t.rootDirectoryLength,t);t.specVersion===1&&(a=Pr(a));let l=Tr(new DataView(a),n,i,s);if(l){let d=(yield e.getBytes(l.offset,l.length,o)).data,m=new DataView(d);return m.getUint8(0)==31&&m.getUint8(1)==139&&(d=Dt(new Uint8Array(d))),{data:d}}let u=Ii(new DataView(a),{z:n,x:i,y:s});if(u){let h=Xi(new DataView(a),u.z,u.x,u.y);if(h){let d=yield r.getArrayBuffer(e,h.offset,h.length,t);t.specVersion===1&&(d=Pr(d));let m=Tr(new DataView(d),n,i,s);if(m){let w=(yield e.getBytes(m.offset,m.length,o)).data,k=new DataView(w);return k.getUint8(0)==31&&k.getUint8(1)==139&&(w=Dt(new Uint8Array(w))),{data:w}}}}})}var jr={getHeader:Yi,getZxy:Vi};function Fe(t,e){return(e>>>0)*4294967296+(t>>>0)}function Ui(t,e){let r=e.buf,n,i;if(i=r[e.pos++],n=(i&112)>>4,i<128||(i=r[e.pos++],n|=(i&127)<<3,i<128)||(i=r[e.pos++],n|=(i&127)<<10,i<128)||(i=r[e.pos++],n|=(i&127)<<17,i<128)||(i=r[e.pos++],n|=(i&127)<<24,i<128)||(i=r[e.pos++],n|=(i&1)<<31,i<128))return Fe(t,n);throw new Error("Expected varint not more than 10 bytes")}function Ve(t){let e=t.buf,r,n;return n=e[t.pos++],r=n&127,n<128||(n=e[t.pos++],r|=(n&127)<<7,n<128)||(n=e[t.pos++],r|=(n&127)<<14,n<128)||(n=e[t.pos++],r|=(n&127)<<21,n<128)?r:(n=e[t.pos],r|=(n&15)<<28,Ui(r,t))}function $i(t,e,r,n){if(n==0){r==1&&(e[0]=t-1-e[0],e[1]=t-1-e[1]);let i=e[0];e[0]=e[1],e[1]=i}}function ji(t,e,r){if(t>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(e>Math.pow(2,t)-1||r>Math.pow(2,t)-1)throw Error("tile x/y outside zoom level bounds");let n=0,i=0;for(;i<t;)n+=Math.pow(2,i)*Math.pow(2,i),i++;let s=Math.pow(2,t),o=0,a=0,l=0,u=[e,r],h=s/2;for(;h>0;)o=(u[0]&h)>0?1:0,a=(u[1]&h)>0?1:0,l+=h*h*(3*o^a),$i(h,u,o,a),h=h/2;return n+l}function Nr(t,e){return V(this,null,function*(){if(e===1||e===0)return t;if(e===2)return Dt(new Uint8Array(t));throw Error("Compression method not supported")})}var Ni=127;function Zi(t,e){let r=0,n=t.length-1;for(;r<=n;){let i=n+r>>1,s=e-t[i].tileId;if(s>0)r=i+1;else if(s<0)n=i-1;else return t[i]}return n>=0&&(t[n].runLength===0||e-t[n].tileId<t[n].runLength)?t[n]:null}var qi=class{constructor(t){this.url=t}getKey(){return this.url}getBytes(t,e,r){return V(this,null,function*(){let n;r||(n=new AbortController,r=n.signal);let i=yield fetch(this.url,{signal:r,headers:{Range:"bytes="+t+"-"+(t+e-1)}});if(i.status===416&&t===0){let a=i.headers.get("Content-Range");if(!a||!a.startsWith("bytes */"))throw Error("Missing content-length on 416 response");let l=+a.substr(8);i=yield fetch(this.url,{signal:r,headers:{Range:"bytes=0-"+(l-1)}})}if(i.status>=300)throw Error("Bad response code: "+i.status);let s=i.headers.get("Content-Length");if(i.status===200&&(!s||+s>e))throw n&&n.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield i.arrayBuffer(),etag:i.headers.get("ETag")||void 0,cacheControl:i.headers.get("Cache-Control")||void 0,expires:i.headers.get("Expires")||void 0}})}};function G(t,e){let r=t.getUint32(e+4,!0),n=t.getUint32(e+0,!0);return r*Math.pow(2,32)+n}function Wi(t,e){let r=new DataView(t),n=r.getUint8(7);if(n>3)throw Error(`Archive is spec version ${n} but this library supports up to spec version 3`);return{specVersion:n,rootDirectoryOffset:G(r,8),rootDirectoryLength:G(r,16),jsonMetadataOffset:G(r,24),jsonMetadataLength:G(r,32),leafDirectoryOffset:G(r,40),leafDirectoryLength:G(r,48),tileDataOffset:G(r,56),tileDataLength:G(r,64),numAddressedTiles:G(r,72),numTileEntries:G(r,80),numTileContents:G(r,88),clustered:r.getUint8(96)===1,internalCompression:r.getUint8(97),tileCompression:r.getUint8(98),tileType:r.getUint8(99),minZoom:r.getUint8(100),maxZoom:r.getUint8(101),minLon:r.getInt32(102,!0)/1e7,minLat:r.getInt32(106,!0)/1e7,maxLon:r.getInt32(110,!0)/1e7,maxLat:r.getInt32(114,!0)/1e7,centerZoom:r.getUint8(118),centerLon:r.getInt32(119,!0)/1e7,centerLat:r.getInt32(123,!0)/1e7,etag:e}}function Zr(t){let e={buf:new Uint8Array(t),pos:0},r=Ve(e),n=[],i=0;for(let s=0;s<r;s++){let o=Ve(e);n.push({tileId:i+o,offset:0,length:0,runLength:1}),i+=o}for(let s=0;s<r;s++)n[s].runLength=Ve(e);for(let s=0;s<r;s++)n[s].length=Ve(e);for(let s=0;s<r;s++){let o=Ve(e);o===0&&s>0?n[s].offset=n[s-1].offset+n[s-1].length:n[s].offset=o-1}return n}function Hi(t){let e=new DataView(t);return e.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):e.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var Se=class extends Error{};function Ji(t,e,r,n){return V(this,null,function*(){let i=yield t.getBytes(0,16384);if(new DataView(i.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(Hi(i.data)<3)return[yield jr.getHeader(t)];let o=i.data.slice(0,Ni),a=i.etag;n&&i.etag!=n&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+t.getKey()),a=void 0);let l=Wi(o,a);if(r){let u=i.data.slice(l.rootDirectoryOffset,l.rootDirectoryOffset+l.rootDirectoryLength),h=t.getKey()+"|"+(l.etag||"")+"|"+l.rootDirectoryOffset+"|"+l.rootDirectoryLength,d=Zr(yield e(u,l.internalCompression));return[l,[h,d.length,d]]}return[l,void 0]})}function Ki(t,e,r,n,i){return V(this,null,function*(){let s=yield t.getBytes(r,n);if(i.etag&&i.etag!==s.etag)throw new Se(s.etag);let o=yield e(s.data,i.internalCompression),a=Zr(o);if(a.length===0)throw new Error("Empty directory is invalid");return a})}var Gi=class{constructor(t=100,e=!0,r=Nr){this.cache=new Map,this.maxCacheEntries=t,this.counter=1,this.prefetch=e,this.decompress=r}getHeader(t,e){return V(this,null,function*(){let r=t.getKey();if(this.cache.has(r))return this.cache.get(r).lastUsed=this.counter++,yield this.cache.get(r).data;let n=new Promise((i,s)=>{Ji(t,this.decompress,this.prefetch,e).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),i(o[0]),this.prune()}).catch(o=>{s(o)})});return this.cache.set(r,{lastUsed:this.counter++,data:n}),n})}getDirectory(t,e,r,n){return V(this,null,function*(){let i=t.getKey()+"|"+(n.etag||"")+"|"+e+"|"+r;if(this.cache.has(i))return this.cache.get(i).lastUsed=this.counter++,yield this.cache.get(i).data;let s=new Promise((o,a)=>{Ki(t,this.decompress,e,r,n).then(l=>{o(l),this.prune()}).catch(l=>{a(l)})});return this.cache.set(i,{lastUsed:this.counter++,data:s}),s})}getArrayBuffer(t,e,r,n){return V(this,null,function*(){let i=t.getKey()+"|"+(n.etag||"")+"|"+e+"|"+r;if(this.cache.has(i))return this.cache.get(i).lastUsed=this.counter++,yield this.cache.get(i).data;let s=new Promise((o,a)=>{t.getBytes(e,r).then(l=>{if(n.etag&&n.etag!==l.etag)throw new Se(l.etag);o(l.data),this.cache.has(i),this.prune()}).catch(l=>{a(l)})});return this.cache.set(i,{lastUsed:this.counter++,data:s}),s})}prune(){if(this.cache.size>=this.maxCacheEntries){let t=1/0,e;this.cache.forEach((r,n)=>{r.lastUsed<t&&(t=r.lastUsed,e=n)}),e&&this.cache.delete(e)}}invalidate(t,e){return V(this,null,function*(){this.cache.delete(t.getKey()),yield this.getHeader(t,e)})}},st=class{constructor(t,e,r){typeof t=="string"?this.source=new qi(t):this.source=t,r?this.decompress=r:this.decompress=Nr,e?this.cache=e:this.cache=new Gi}getHeader(){return V(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(t,e,r,n){return V(this,null,function*(){let i=ji(t,e,r),s=yield this.cache.getHeader(this.source);if(s.specVersion<3)return jr.getZxy(s,this.source,this.cache,t,e,r,n);if(t<s.minZoom||t>s.maxZoom)return;let o=s.rootDirectoryOffset,a=s.rootDirectoryLength;for(let l=0;l<=3;l++){let u=yield this.cache.getDirectory(this.source,o,a,s),h=Zi(u,i);if(h)if(h.runLength>0){let d=yield this.source.getBytes(s.tileDataOffset+h.offset,h.length,n);if(s.etag&&s.etag!==d.etag)throw new Se(d.etag);return{data:yield this.decompress(d.data,s.tileCompression),cacheControl:d.cacheControl,expires:d.expires}}else o=s.leafDirectoryOffset+h.offset,a=h.length;else return}throw Error("Maximum directory depth exceeded")})}getZxy(t,e,r,n){return V(this,null,function*(){try{return yield this.getZxyAttempt(t,e,r,n)}catch(i){if(i instanceof Se)return this.cache.invalidate(this.source,i.message),yield this.getZxyAttempt(t,e,r,n);throw i}})}getMetadataAttempt(){return V(this,null,function*(){let t=yield this.cache.getHeader(this.source),e=yield this.source.getBytes(t.jsonMetadataOffset,t.jsonMetadataLength);if(t.etag&&t.etag!==e.etag)throw new Se(e.etag);let r=yield this.decompress(e.data,t.internalCompression),n=new TextDecoder("utf-8");return JSON.parse(n.decode(r))})}getMetadata(){return V(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(t){if(t instanceof Se)return this.cache.invalidate(this.source,t.message),yield this.getMetadataAttempt();throw t}})}};var lt=(n=>(n[n.Point=1]="Point",n[n.Line=2]="Line",n[n.Polygon=3]="Polygon",n))(lt||{});function ae(t){return`${t.x}:${t.y}:${t.z}`}var Qi=(t,e,r)=>{t.pos=e;let n=t.readVarint()+t.pos,i=1,s=0,o=0,a=0,l=1/0,u=-1/0,h=1/0,d=-1/0,m=[],b=[];for(;t.pos<n;){if(s<=0){let w=t.readVarint();i=w&7,s=w>>3}if(s--,i===1||i===2)o+=t.readSVarint()*r,a+=t.readSVarint()*r,o<l&&(l=o),o>u&&(u=o),a<h&&(h=a),a>d&&(d=a),i===1&&(b.length>0&&m.push(b),b=[]),b.push(new Ce.default(o,a));else if(i===7)b&&b.push(b[0].clone());else throw new Error(`unknown command ${i}`)}return b&&m.push(b),{geom:m,bbox:{minX:l,minY:h,maxX:u,maxY:d}}};function Kr(t,e){let r=new Hr.VectorTile(new Jr.default(t)),n=new Map;for(let[i,s]of Object.entries(r.layers)){let o=[],a=s;for(let l=0;l<a.length;l++){let u=Qi(a.feature(l)._pbf,a.feature(l)._geometry,e/a.extent),h=0;for(let d of u.geom)h+=d.length;o.push({id:a.feature(l).id,geomType:a.feature(l).type,geom:u.geom,numVertices:h,bbox:u.bbox,props:a.feature(l).properties})}n.set(i,o)}return n}var Me=class{constructor(e,r){typeof e=="string"?this.p=new st(e):this.p=e,this.zoomaborts=[],this.shouldCancelZooms=r}get(e,r){return O(this,null,function*(){this.shouldCancelZooms&&(this.zoomaborts=this.zoomaborts.filter(o=>o.z!==e.z?(o.controller.abort(),!1):!0));let n=new AbortController;this.zoomaborts.push({z:e.z,controller:n});let i=n.signal,s=yield this.p.getZxy(e.z,e.x,e.y,i);return s?Kr(s.data,r):new Map})}},je=class{constructor(e,r){this.url=e,this.zoomaborts=[],this.shouldCancelZooms=r}get(e,r){return O(this,null,function*(){this.shouldCancelZooms&&(this.zoomaborts=this.zoomaborts.filter(o=>o.z!==e.z?(o.controller.abort(),!1):!0));let n=this.url.replace("{z}",e.z.toString()).replace("{x}",e.x.toString()).replace("{y}",e.y.toString()),i=new AbortController;this.zoomaborts.push({z:e.z,controller:i});let s=i.signal;return new Promise((o,a)=>{fetch(n,{signal:s}).then(l=>l.arrayBuffer()).then(l=>{let u=Kr(l,r);o(u)}).catch(l=>{a(l)})})})}},Bt=6378137,qr=85.0511287798,ot=Bt*Math.PI,es=t=>{let e=Math.PI/180,r=Math.max(Math.min(qr,t[0]),-qr),n=Math.sin(r*e);return new Ce.default(Bt*t[1]*e,Bt*Math.log((1+n)/(1-n))/2)};function Wr(t){return t*t}function at(t,e){return Wr(t.x-e.x)+Wr(t.y-e.y)}function ts(t,e,r){let n=at(e,r);if(n===0)return at(t,e);let i=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/n;return i=Math.max(0,Math.min(1,i)),at(t,new Ce.default(e.x+i*(r.x-e.x),e.y+i*(r.y-e.y)))}function Rt(t,e){let r=!1;for(let n=0,i=e.length-1;n<e.length;i=n++){let s=e[n].x,o=e[n].y,a=e[i].x,l=e[i].y;o>t.y!=l>t.y&&t.x<(a-s)*(t.y-o)/(l-o)+s&&(r=!r)}return r}function Gr(t){let e=0;for(let r=0;r<t.length;r++){let n=(r+1)%t.length;e+=t[r].x*t[n].y,e-=t[n].x*t[r].y}return e<0}function Qr(t,e){let r=!1;for(let n of e)if(Gr(n))Rt(t,n)&&(r=!1);else{if(r)return!0;Rt(t,n)&&(r=!0)}return r}function en(t,e){let r=1/0;for(let n of e){let i=Math.sqrt(at(t,n[0]));i<r&&(r=i)}return r}function tn(t,e){let r=1/0;for(let n of e)for(let i=0;i<n.length-1;i++){let s=Math.sqrt(ts(t,n[i],n[i+1]));s<r&&(r=s)}return r}var Ne=class{constructor(e,r){this.source=e,this.cache=new Map,this.inflight=new Map,this.tileSize=r}queryFeatures(e,r,n,i){let s=es([r,e]),o=new Ce.default((s.x+ot)/(ot*2),1-(s.y+ot)/(ot*2));o.x>1&&(o.x=o.x-Math.floor(o.x));let a=o.mult(1<<n),l=Math.floor(a.x),u=Math.floor(a.y),h=ae({z:n,x:l,y:u}),d=[],m=this.cache.get(h);if(m){let b=new Ce.default((a.x-l)*this.tileSize,(a.y-u)*this.tileSize);for(let[w,k]of m.data.entries())for(let c of k)c.geomType===1?en(b,c.geom)<i&&d.push({feature:c,layerName:w}):c.geomType===2?tn(b,c.geom)<i&&d.push({feature:c,layerName:w}):Qr(b,c.geom)&&d.push({feature:c,layerName:w})}return d}get(e){return O(this,null,function*(){let r=ae(e);return new Promise((n,i)=>{let s=this.cache.get(r);if(s)s.used=performance.now(),n(s.data);else{let o=this.inflight.get(r);o?o.push([n,i]):(this.inflight.set(r,[]),this.source.get(e,this.tileSize).then(a=>{this.cache.set(r,{used:performance.now(),data:a});let l=this.inflight.get(r);if(l)for(let u of l)u[0](a);if(this.inflight.delete(r),n(a),this.cache.size>=64){let u=1/0,h;this.cache.forEach((d,m)=>{d.used<u&&(u=d.used,h=m)}),h&&this.cache.delete(h)}}).catch(a=>{let l=this.inflight.get(r);if(l)for(let u of l)u[1](a);this.inflight.delete(r),i(a)}))}})})}};var sn=5400,Et=(n=>(n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=3]="Right",n))(Et||{}),on=(l=>(l[l.N=1]="N",l[l.NE=2]="NE",l[l.E=3]="E",l[l.SE=4]="SE",l[l.S=5]="S",l[l.SW=6]="SW",l[l.W=7]="W",l[l.NW=8]="NW",l))(on||{}),It=(t,e,r)=>{let n=document.createElement("canvas"),i=n.getContext("2d");return n.width=t,n.height=e,i!==null&&r(n,i),n},D=class{constructor(e){var r;this.pattern=e.pattern,this.fill=new E(e.fill,"black"),this.opacity=new A(e.opacity,1),this.stroke=new E(e.stroke,"black"),this.width=new A(e.width,0),this.per_feature=(r=this.fill.per_feature||this.opacity.per_feature||this.stroke.per_feature||this.width.per_feature||e.per_feature)!=null?r:!1,this.do_stroke=!1}before(e,r){if(!this.per_feature){e.globalAlpha=this.opacity.get(r),e.fillStyle=this.fill.get(r),e.strokeStyle=this.stroke.get(r);let n=this.width.get(r);n>0&&(this.do_stroke=!0),e.lineWidth=n}if(this.pattern){let n=e.createPattern(this.pattern,"repeat");n&&(e.fillStyle=n)}}draw(e,r,n,i){let s=!1;if(this.per_feature){e.globalAlpha=this.opacity.get(n,i),e.fillStyle=this.fill.get(n,i);let l=this.width.get(n,i);l&&(s=!0,e.strokeStyle=this.stroke.get(n,i),e.lineWidth=l)}let o=()=>{e.fill(),(s||this.do_stroke)&&e.stroke()},a=0;e.beginPath();for(let l of r){a+l.length>sn&&(o(),a=0,e.beginPath());for(let u=0;u<l.length;u++){let h=l[u];u===0?e.moveTo(h.x,h.y):e.lineTo(h.x,h.y)}a+=l.length}a>0&&o()}};function fe(t,e){return r=>{let n=r-t;return n>=0&&n<e.length?e[n]:0}}function an(t,e){let r=0;for(;e[r+1][0]<t;)r++;return r}function ln(t,e,r){return t*(r-e)+e}function un(t,e,r,n){let i=n[e+1][0]-n[e][0],s=t-n[e][0];return i===0?0:r===1?s/i:(X(r,s)-1)/(X(r,i)-1)}function U(t,e){return r=>{if(e.length<1)return 0;if(r<=e[0][0])return e[0][1];if(r>=e[e.length-1][0])return e[e.length-1][1];let n=an(r,e),i=un(r,n,t,e);return ln(i,e[n][1],e[n+1][1])}}function rs(t,e){return r=>{if(e.length<1)return 0;let n=t;for(let i=0;i<e.length;i++)r>=e[i][0]&&(n=e[i][1]);return n}}function ns(t){return U(1,t)}function is(t,e,r,n,i){return s=>{if(i.length<1)return 0;let o=new rn.default(t,e,r,n),a=an(s,i),l=o.solve(un(s,a,1,i));return ln(l,i[a][1],i[a+1][1])}}var M=class{constructor(e){var r;this.color=new E(e.color,"black"),this.width=new A(e.width),this.opacity=new A(e.opacity),this.dash=e.dash?new et(e.dash):null,this.dashColor=new E(e.dashColor,"black"),this.dashWidth=new A(e.dashWidth,1),this.lineCap=new E(e.lineCap,"butt"),this.lineJoin=new E(e.lineJoin,"miter"),this.skip=!1,this.per_feature=!!(((r=this.dash)==null?void 0:r.per_feature)||this.color.per_feature||this.opacity.per_feature||this.width.per_feature||this.lineCap.per_feature||this.lineJoin.per_feature||e.per_feature)}before(e,r){this.per_feature||(e.strokeStyle=this.color.get(r),e.lineWidth=this.width.get(r),e.globalAlpha=this.opacity.get(r),e.lineCap=this.lineCap.get(r),e.lineJoin=this.lineJoin.get(r))}draw(e,r,n,i){if(this.skip)return;let s=()=>{this.per_feature&&(e.globalAlpha=this.opacity.get(n,i),e.lineCap=this.lineCap.get(n,i),e.lineJoin=this.lineJoin.get(n,i)),this.dash?(e.save(),this.per_feature?(e.lineWidth=this.dashWidth.get(n,i),e.strokeStyle=this.dashColor.get(n,i),e.setLineDash(this.dash.get(n,i))):e.setLineDash(this.dash.get(n)),e.stroke(),e.restore()):(e.save(),this.per_feature&&(e.lineWidth=this.width.get(n,i),e.strokeStyle=this.color.get(n,i)),e.stroke(),e.restore())},o=0;e.beginPath();for(let a of r){o+a.length>sn&&(s(),o=0,e.beginPath());for(let l=0;l<a.length;l++){let u=a[l];l===0?e.moveTo(u.x,u.y):e.lineTo(u.x,u.y)}o+=a.length}o>0&&s()}},Xt=class{constructor(e){this.name=e.name,this.sheet=e.sheet,this.dpr=window.devicePixelRatio}place(e,r,n){let i=r[0],s=new N.default(r[0][0].x,r[0][0].y),o=this.sheet.get(this.name),a=o.w/this.dpr,l=o.h/this.dpr,u={minX:s.x-a/2,minY:s.y-l/2,maxX:s.x+a/2,maxY:s.y+l/2};return[{anchor:s,bboxes:[u],draw:d=>{d.globalAlpha=1,d.drawImage(this.sheet.canvas,o.x,o.y,o.w,o.h,-o.w/2/this.dpr,-o.h/2/this.dpr,o.w/2,o.h/2)}}]}},W=class{constructor(e){this.radius=new A(e.radius,3),this.fill=new E(e.fill,"black"),this.stroke=new E(e.stroke,"white"),this.width=new A(e.width,0),this.opacity=new A(e.opacity)}draw(e,r,n,i){e.globalAlpha=this.opacity.get(n,i);let s=this.radius.get(n,i),o=this.width.get(n,i);o>0&&(e.strokeStyle=this.stroke.get(n,i),e.lineWidth=o,e.beginPath(),e.arc(r[0][0].x,r[0][0].y,s+o/2,0,2*Math.PI),e.stroke()),e.fillStyle=this.fill.get(n,i),e.beginPath(),e.arc(r[0][0].x,r[0][0].y,s,0,2*Math.PI),e.fill()}place(e,r,n){let i=r[0],s=new N.default(r[0][0].x,r[0][0].y),o=this.radius.get(e.zoom,n),a={minX:s.x-o,minY:s.y-o,maxX:s.x+o,maxY:s.y+o};return[{anchor:s,bboxes:[a],draw:u=>{this.draw(u,[[new N.default(0,0)]],e.zoom,n)}}]}},Ze=class{constructor(e){this.font=new _e(e),this.text=new ve(e),this.fill=new E(e.fill,"black"),this.background=new E(e.background,"white"),this.padding=new A(e.padding,0)}place(e,r,n){let i=this.text.get(e.zoom,n);if(!i)return;let s=this.font.get(e.zoom,n);e.scratch.font=s;let o=e.scratch.measureText(i),a=o.width,l=o.actualBoundingBoxAscent,u=o.actualBoundingBoxDescent,h=r[0],d=new N.default(r[0][0].x,r[0][0].y),m=this.padding.get(e.zoom,n),b={minX:d.x-a/2-m,minY:d.y-l-m,maxX:d.x+a/2+m,maxY:d.y+u+m};return[{anchor:d,bboxes:[b],draw:k=>{k.globalAlpha=1,k.fillStyle=this.background.get(e.zoom,n),k.fillRect(-a/2-m,-l-m,a+2*m,l+u+2*m),k.fillStyle=this.fill.get(e.zoom,n),k.font=s,k.fillText(i,-a/2,0)}}]}},Te=class{constructor(e){this.list=e}place(e,r,n){let i=this.list[0].place(e,r,n);if(!i)return;let s=i[0],o=s.anchor,a=s.bboxes[0],l=a.maxY-a.minY,u=[{draw:s.draw,translate:{x:0,y:0}}],h=[[new N.default(r[0][0].x,r[0][0].y+l)]];for(let m=1;m<this.list.length;m++)i=this.list[m].place(e,h,n),i&&(s=i[0],a=hn(a,s.bboxes[0]),u.push({draw:s.draw,translate:{x:0,y:l}}));return[{anchor:o,bboxes:[a],draw:m=>{for(let b of u)m.save(),m.translate(b.translate.x,b.translate.y),b.draw(m),m.restore()}}]}},hn=(t,e)=>({minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}),ce=class{constructor(e){this.list=e}place(e,r,n){let i=this.list[0];if(!i)return;let s=i.place(e,r,n);if(!s)return;let o=s[0],a=o.anchor,l=o.bboxes[0],u=[o.draw];for(let d=1;d<this.list.length;d++){if(s=this.list[d].place(e,r,n),!s)return;o=s[0],l=hn(l,o.bboxes[0]),u.push(o.draw)}return[{anchor:a,bboxes:[l],draw:d=>{for(let m of u)m(d)}}]}},ut=class{constructor(e){this.symbolizer=e}place(e,r,n){let i=r[0][0],s=this.symbolizer.place(e,[[new N.default(0,0)]],n);if(!s||s.length===0)return;let o=s[0],a=o.bboxes[0],l=a.maxX-a.minX,u=a.maxY-a.minY,h={minX:i.x-l/2,maxX:i.x+l/2,minY:i.y-u/2,maxY:i.y+u/2};return[{anchor:i,bboxes:[h],draw:m=>{m.translate(-l/2,u/2-a.maxY),o.draw(m,{justify:2})}}]}},Ot=class{constructor(e,r){this.padding=new A(e,0),this.symbolizer=r}place(e,r,n){let i=this.symbolizer.place(e,r,n);if(!i||i.length===0)return;let s=this.padding.get(e.zoom,n);for(let o of i)for(let a of o.bboxes)a.minX-=s,a.minY-=s,a.maxX+=s,a.maxY+=s;return i}},Pe=class{constructor(e){this.font=new _e(e),this.text=new ve(e),this.fill=new E(e.fill,"black"),this.stroke=new E(e.stroke,"black"),this.width=new A(e.width,0),this.lineHeight=new A(e.lineHeight,1),this.letterSpacing=new A(e.letterSpacing,0),this.maxLineCodeUnits=new A(e.maxLineChars,15),this.justify=e.justify}place(e,r,n){let i=this.text.get(e.zoom,n);if(!i)return;let s=this.font.get(e.zoom,n);e.scratch.font=s;let o=this.letterSpacing.get(e.zoom,n),a=Lt(i,this.maxLineCodeUnits.get(e.zoom,n)),l="",u=0;for(let p of a)p.length>u&&(u=p.length,l=p);let h=e.scratch.measureText(l),d=h.width+o*(u-1),m=h.actualBoundingBoxAscent,b=h.actualBoundingBoxDescent,w=(m+b)*this.lineHeight.get(e.zoom,n),k=new N.default(r[0][0].x,r[0][0].y),c={minX:k.x,minY:k.y-m,maxX:k.x+d,maxY:k.y+b+(a.length-1)*w};return[{anchor:k,bboxes:[c],draw:(p,g)=>{p.globalAlpha=1,p.font=s,p.fillStyle=this.fill.get(e.zoom,n);let y=this.width.get(e.zoom,n),x=0;for(let _ of a){let v=0;if(this.justify===2||g&&g.justify===2?v=(d-p.measureText(_).width)/2:(this.justify===3||g&&g.justify===3)&&(v=d-p.measureText(_).width),y)if(p.lineWidth=y*2,p.strokeStyle=this.stroke.get(e.zoom,n),o>0){let z=v;for(let F of _)p.strokeText(F,z,x),z+=p.measureText(F).width+o}else p.strokeText(_,v,x);if(o>0){let z=v;for(let F of _)p.fillText(F,z,x),z+=p.measureText(F).width+o}else p.fillText(_,v,x);x+=w}}}]}},I=class{constructor(e){this.centered=new ut(new Pe(e))}place(e,r,n){return this.centered.place(e,r,n)}},ht=class{constructor(e,r){var n,i,s;this.symbolizer=e,this.offsetX=new A(r.offsetX,0),this.offsetY=new A(r.offsetY,0),this.justify=(n=r.justify)!=null?n:void 0,this.placements=(i=r.placements)!=null?i:[2,6,8,4,1,3,5,7],this.ddValues=(s=r.ddValues)!=null?s:()=>({})}place(e,r,n){if(n.geomType!==1)return;let i=r[0][0],s=this.symbolizer.place(e,[[new N.default(0,0)]],n);if(!s||s.length===0)return;let o=s[0],a=o.bboxes[0],l=this.offsetX,u=this.offsetY,h=this.justify,d=this.placements,{offsetX:m,offsetY:b,justify:w,placements:k}=this.ddValues(e.zoom,n)||{};m&&(l=new A(m,0)),b&&(u=new A(b,0)),w&&(h=w),k&&(d=k);let c=l.get(e.zoom,n),f=u.get(e.zoom,n),p=(v,z)=>({minX:v.x+z.x+a.minX,minY:v.y+z.y+a.minY,maxX:v.x+z.x+a.maxX,maxY:v.y+z.y+a.maxY}),g=new N.default(c,f),y,x=v=>{v.translate(g.x,g.y),o.draw(v,{justify:y})},_=(v,z)=>{let F=p(v,z);if(!e.index.bboxCollides(F,e.order))return[{anchor:i,bboxes:[F],draw:x}]};for(let v of d){let z=this.computeXAxisOffset(c,a,v),F=this.computeYAxisOffset(f,a,v);return y=this.computeJustify(h,v),g=new N.default(z,F),_(i,g)}}computeXAxisOffset(e,r,n){let i=r.maxX,s=i/2;return[1,5].includes(n)?e-s:[8,7,6].includes(n)?e-i:e}computeYAxisOffset(e,r,n){let i=Math.abs(r.minY),s=r.maxY,o=(r.minY+r.maxY)/2;return[3,7].includes(n)?e-o:[8,2,1].includes(n)?e-s:[6,4,5].includes(n)?e+i:e}computeJustify(e,r){return e||([1,5].includes(r)?2:[2,3,4].includes(r)?1:3)}},te=class{constructor(e){this.symbolizer=new ht(new Pe(e),e)}place(e,r,n){return this.symbolizer.place(e,r,n)}},cn=(n=>(n[n.Above=1]="Above",n[n.Center=2]="Center",n[n.Below=3]="Below",n))(cn||{}),le=class{constructor(e){var r;this.font=new _e(e),this.text=new ve(e),this.fill=new E(e.fill,"black"),this.stroke=new E(e.stroke,"black"),this.width=new A(e.width,0),this.offset=new A(e.offset,0),this.position=(r=e.position)!=null?r:1,this.maxLabelCodeUnits=new A(e.maxLabelChars,40),this.repeatDistance=new A(e.repeatDistance,250)}place(e,r,n){let i=this.text.get(e.zoom,n);if(!i||i.length>this.maxLabelCodeUnits.get(e.zoom,n))return;let s=20,o=n.bbox;if(o.maxY-o.minY<s&&o.maxX-o.minX<s)return;let a=this.font.get(e.zoom,n);e.scratch.font=a;let l=e.scratch.measureText(i),u=l.width,h=l.actualBoundingBoxAscent+l.actualBoundingBoxDescent,d=this.repeatDistance.get(e.zoom,n);e.overzoom>4&&(d*=1<<e.overzoom-4);let m=h*2,b=pr(r,u,d,m);if(b.length===0)return;let w=[];for(let k of b){let c=k.end.x-k.start.x,f=k.end.y-k.start.y,g=yr(k.start,k.end,u,m/2).map(x=>({minX:x.x-m/2,minY:x.y-m/2,maxX:x.x+m/2,maxY:x.y+m/2})),y=x=>{x.globalAlpha=1,x.rotate(Math.atan2(f,c)),c<0&&(x.scale(-1,-1),x.translate(-u,0));let _=0;this.position===3?_+=h:this.position===2&&(_+=h/2),x.translate(0,_-this.offset.get(e.zoom,n)),x.font=a;let v=this.width.get(e.zoom,n);v&&(x.lineWidth=v,x.strokeStyle=this.stroke.get(e.zoom,n),x.strokeText(i,0,0)),x.fillStyle=this.fill.get(e.zoom,n),x.fillText(i,0,0)};w.push({anchor:k.start,bboxes:g,draw:y,deduplicationKey:i,deduplicationDistance:d})}return w}},re=class{constructor(e){this.symbolizer=new Pe(e)}place(e,r,n){let i=n.bbox;if((i.maxY-i.minY)*(i.maxX-i.minX)<2e4)return;let o=this.symbolizer.place(e,[[new N.default(0,0)]],n);if(!o||o.length===0)return;let a=o[0],l=a.bboxes[0],u=r[0],h=(0,nn.default)([u.map(w=>[w.x,w.y])]),d=new N.default(h[0],h[1]),m={minX:d.x-(l.maxX-l.minX)/2,minY:d.y-(l.maxY-l.minY)/2,maxX:d.x+(l.maxX-l.minX)/2,maxY:d.y+(l.maxY-l.minY)/2};return[{anchor:d,bboxes:[m],draw:w=>{w.translate(a.anchor.x-(l.maxX-l.minX)/2,a.anchor.y),a.draw(w)}}]}};var fn=(t,e)=>{let r=bt(e),n=ir({},t);for(let[i,s]of Object.entries(t)){let o=bt(s);n[i]=ur(r[0],r[1],o[2],o[3])}return n},De=(t,e)=>{let r=t;return e&&(r=fn(t,e)),[{dataLayer:"earth",symbolizer:new D({fill:r.earth})},{dataLayer:"natural",symbolizer:new D({fill:r.glacier}),filter:(n,i)=>i.props.natural==="glacier"},{dataLayer:"landuse",symbolizer:new D({fill:r.residential}),filter:(n,i)=>i.props.landuse==="residential"||i.props.place==="neighbourhood"},{dataLayer:"landuse",symbolizer:new D({fill:r.hospital}),filter:(n,i)=>i.props.amenity==="hospital"},{dataLayer:"landuse",symbolizer:new D({fill:r.cemetery}),filter:(n,i)=>i.props.landuse==="cemetery"},{dataLayer:"landuse",symbolizer:new D({fill:r.school}),filter:(n,i)=>i.props.amenity==="school"||i.props.amenity==="kindergarten"||i.props.amenity==="university"||i.props.amenity==="college"},{dataLayer:"landuse",symbolizer:new D({fill:r.industrial}),filter:(n,i)=>i.props.landuse==="industrial"},{dataLayer:"natural",symbolizer:new D({fill:r.wood}),filter:(n,i)=>i.props.natural==="wood"},{dataLayer:"landuse",symbolizer:new D({fill:r.grass}),filter:(n,i)=>i.props.landuse==="grass"},{dataLayer:"landuse",symbolizer:new D({fill:r.park}),filter:(n,i)=>i.props.leisure==="park"},{dataLayer:"water",symbolizer:new D({fill:r.water})},{dataLayer:"natural",symbolizer:new D({fill:r.sand}),filter:(n,i)=>i.props.natural==="sand"},{dataLayer:"buildings",symbolizer:new D({fill:r.buildings})},{dataLayer:"roads",symbolizer:new M({color:r.highwayCasing,width:U(1.4,[[5,1.5],[11,4],[16,9],[20,40]])}),filter:(n,i)=>i.props["pmap:kind"]==="highway"},{dataLayer:"roads",symbolizer:new M({color:r.majorRoadCasing,width:U(1.4,[[9,3],[12,4],[17,8],[20,22]])}),filter:(n,i)=>i.props["pmap:kind"]==="major_road"},{dataLayer:"roads",symbolizer:new M({color:r.mediumRoadCasing,width:U(1.4,[[13,3],[17,6],[20,18]])}),filter:(n,i)=>i.props["pmap:kind"]==="medium_road"},{dataLayer:"roads",symbolizer:new M({color:r.minorRoadCasing,width:U(1.4,[[14,2],[17,5],[20,15]])}),filter:(n,i)=>i.props["pmap:kind"]==="minor_road"},{dataLayer:"roads",symbolizer:new M({color:r.minorRoad,width:U(1.4,[[14,1],[17,3],[20,13]])}),filter:(n,i)=>i.props["pmap:kind"]==="minor_road"},{dataLayer:"roads",symbolizer:new M({color:r.mediumRoad,width:U(1.4,[[13,2],[17,4],[20,15]])}),filter:(n,i)=>i.props["pmap:kind"]==="medium_road"},{dataLayer:"roads",symbolizer:new M({color:r.majorRoad,width:U(1.4,[[9,2],[12,3],[17,6],[20,20]])}),filter:(n,i)=>i.props["pmap:kind"]==="major_road"},{dataLayer:"roads",symbolizer:new M({color:r.highway,width:U(1.4,[[5,.5],[11,2.5],[16,7],[20,30]])}),filter:(n,i)=>i.props["pmap:kind"]==="highway"},{dataLayer:"boundaries",symbolizer:new M({color:r.boundaries,width:2,opacity:.4})},{dataLayer:"mask",symbolizer:new D({fill:r.mask})}]},Ae=(t,e,r,n)=>{let i=t;e&&(i=fn(t,e));let s=["name"];r&&(s=r);let o=(a,l)=>n?a instanceof te?new Te([a,new te({fill:l,label_props:n})]):new Te([a,new I({fill:l,label_props:n})]):a;return[{dataLayer:"places",symbolizer:o(new I({label_props:s,fill:i.countryLabel,lineHeight:1.5,font:(a,l)=>a<6?"200 14px sans-serif":"200 20px sans-serif",textTransform:"uppercase"}),i.countryLabel),filter:(a,l)=>l.props["pmap:kind"]==="country"},{dataLayer:"places",symbolizer:o(new I({label_props:s,fill:i.stateLabel,font:"300 16px sans-serif"}),i.stateLabel),filter:(a,l)=>l.props["pmap:kind"]==="state"},{id:"cities_high",dataLayer:"places",filter:(a,l)=>l.props["pmap:kind"]==="city",minzoom:7,symbolizer:o(new I({label_props:s,fill:i.cityLabel,font:(a,l)=>(l==null?void 0:l.props["pmap:rank"])===1?a>8?"600 20px sans-serif":"600 12px sans-serif":a>8?"600 16px sans-serif":"600 10px sans-serif"}),i.cityLabel),sort:(a,l)=>a["pmap:rank"]-l["pmap:rank"]},{id:"cities_low",dataLayer:"places",filter:(a,l)=>l.props["pmap:kind"]==="city",maxzoom:6,symbolizer:new ce([new W({radius:2,fill:i.cityLabel}),o(new te({label_props:s,fill:i.cityLabel,offsetX:2,offsetY:2,font:(a,l)=>(l==null?void 0:l.props["pmap:rank"])===1?a>8?"600 20px sans-serif":"600 12px sans-serif":a>8?"600 16px sans-serif":"600 10px sans-serif"}),i.cityLabel)]),sort:(a,l)=>a["pmap:rank"]-l["pmap:rank"]},{id:"neighbourhood",dataLayer:"places",symbolizer:o(new I({label_props:s,fill:i.neighbourhoodLabel,font:"500 10px sans-serif",textTransform:"uppercase"}),i.neighbourhoodLabel),filter:(a,l)=>l.props["pmap:kind"]==="neighbourhood"},{dataLayer:"landuse",symbolizer:o(new re({label_props:s,fill:i.landuseLabel,font:"300 12px sans-serif"}),i.landuseLabel)},{dataLayer:"water",symbolizer:o(new re({label_props:s,fill:i.waterLabel,font:"italic 600 12px sans-serif"}),i.waterLabel)},{dataLayer:"natural",symbolizer:o(new re({label_props:s,fill:i.naturalLabel,font:"italic 300 12px sans-serif"}),i.naturalLabel)},{dataLayer:"roads",symbolizer:o(new le({label_props:s,fill:i.roadsLabel,font:"500 12px sans-serif"}),i.roadsLabel),minzoom:12},{dataLayer:"roads",symbolizer:new Ze({label_props:["ref"],font:"600 9px sans-serif",background:i.highway,padding:2,fill:i.neighbourhoodLabel}),filter:(a,l)=>l.props["pmap:kind"]==="highway"},{dataLayer:"pois",symbolizer:new ce([new W({radius:2,fill:i.poisLabel}),o(new te({label_props:s,fill:i.poisLabel,offsetX:2,offsetY:2,font:"300 10px sans-serif"}),i.poisLabel)])}]};var mn=$(ee()),pn=$(dn());var pe=$(ee());var We=(t,e,r)=>{let n=[];for(let i of t){let s=[];for(let o of i)s.push(o.clone().mult(e).add(r));n.push(s)}return n},qe=(t,e)=>{let r=1<<e;return t<0?r+t:t>=r?t%r:t},ct=class{constructor(e,r,n){this.tileCache=e,this.maxDataLevel=r,this.levelDiff=n}dataTilesForBounds(e,r){let n=X(2,e)/X(2,Math.ceil(e)),i=[],s=1,o=this.tileCache.tileSize;if(e<this.levelDiff)s=1/(1<<this.levelDiff-e)*n,i.push({data_tile:{z:0,x:0,y:0},origin:new pe.default(0,0),scale:s,dim:o*s});else if(e<=this.levelDiff+this.maxDataLevel){let a=1<<this.levelDiff,l=256*n,u=Math.ceil(e)-this.levelDiff,h=Math.floor(r.minX/a/l),d=Math.floor(r.minY/a/l),m=Math.floor(r.maxX/a/l),b=Math.floor(r.maxY/a/l);for(let w=h;w<=m;w++)for(let k=d;k<=b;k++){let c=new pe.default(w*a*l,k*a*l);i.push({data_tile:{z:u,x:qe(w,u),y:qe(k,u)},origin:c,scale:n,dim:o*n})}}else{let a=1<<this.levelDiff;s=(1<<Math.ceil(e)-this.maxDataLevel-this.levelDiff)*n;let l=Math.floor(r.minX/a/256/s),u=Math.floor(r.minY/a/256/s),h=Math.floor(r.maxX/a/256/s),d=Math.floor(r.maxY/a/256/s);for(let m=l;m<=h;m++)for(let b=u;b<=d;b++){let w=new pe.default(m*a*256*s,b*a*256*s);i.push({data_tile:{z:this.maxDataLevel,x:qe(m,this.maxDataLevel),y:qe(b,this.maxDataLevel)},origin:w,scale:s,dim:o*s})}}return i}dataTileForDisplayTile(e){let r,n=1,i=this.tileCache.tileSize,s;if(e.z<this.levelDiff)r={z:0,x:0,y:0},n=1/(1<<this.levelDiff-e.z),s=new pe.default(0,0),i=i*n;else if(e.z<=this.levelDiff+this.maxDataLevel){let o=1<<this.levelDiff;r={z:e.z-this.levelDiff,x:Math.floor(e.x/o),y:Math.floor(e.y/o)},s=new pe.default(r.x*o*256,r.y*o*256)}else{n=1<<e.z-this.maxDataLevel-this.levelDiff;let o=1<<this.levelDiff;r={z:this.maxDataLevel,x:Math.floor(e.x/o/n),y:Math.floor(e.y/o/n)},s=new pe.default(r.x*o*n*256,r.y*o*n*256),i=i*n}return{data_tile:r,scale:n,origin:s,dim:i}}getBbox(e,r){return O(this,null,function*(){let n=this.dataTilesForBounds(e,r);return(yield Promise.all(n.map(s=>this.tileCache.get(s.data_tile)))).map((s,o)=>{let a=n[o];return{data:s,z:e,data_tile:a.data_tile,scale:a.scale,dim:a.dim,origin:a.origin}})})}getDisplayTile(e){return O(this,null,function*(){let r=this.dataTileForDisplayTile(e);return{data:yield this.tileCache.get(r.data_tile),z:e.z,data_tile:r.data_tile,scale:r.scale,origin:r.origin,dim:r.dim}})}queryFeatures(e,r,n){let i=Math.round(n),s=Math.min(i-this.levelDiff,this.maxDataLevel),o=16/(1<<i-s);return this.tileCache.queryFeatures(e,r,s,o)}},He=t=>{let e=n=>{let i=n.levelDiff===void 0?2:n.levelDiff,s=n.maxDataZoom||14,o;typeof n.url=="string"?n.url.endsWith(".pmtiles")?o=new Me(n.url,!0):o=new je(n.url,!0):o=new Me(n.url,!0);let a=new Ne(o,256*1<<i);return new ct(a,s,i)},r=new Map;if(t.sources)for(let n in t.sources)r.set(n,e(t.sources[n]));else r.set("",e(t));return r};var yn=(t,e,r)=>{let i=e/256,s=Math.floor(r.minX/256),o=Math.floor(r.minY/256),a=Math.floor(r.maxX/256),l=Math.floor(r.maxY/256),u=Math.log2(i),h=[];for(let d=s;d<=a;d++){let m=d%(1<<t);for(let b=o;b<=l;b++)h.push({display:ae({z:t,x:m,y:b}),key:ae({z:t-u,x:Math.floor(m/i),y:Math.floor(b/i)})})}return h},ft=class{constructor(e,r){this.tree=new pn.default,this.current=new Map,this.dim=e,this.maxLabeledTiles=r}hasPrefix(e){for(let r of this.current.keys())if(r.startsWith(e))return!0;return!1}has(e){return this.current.has(e)}size(){return this.current.size}keys(){return this.current.keys()}searchBbox(e,r){let n=new Set;for(let i of this.tree.search(e))i.indexedLabel.order<=r&&n.add(i.indexedLabel);return n}searchLabel(e,r){let n=new Set;for(let i of e.bboxes)for(let s of this.tree.search(i))s.indexedLabel.order<=r&&n.add(s.indexedLabel);return n}bboxCollides(e,r){for(let n of this.tree.search(e))if(n.indexedLabel.order<=r)return!0;return!1}labelCollides(e,r){for(let n of e.bboxes)for(let i of this.tree.search(n))if(i.indexedLabel.order<=r)return!0;return!1}deduplicationCollides(e){if(!e.deduplicationKey||!e.deduplicationDistance)return!1;let r=e.deduplicationDistance,n={minX:e.anchor.x-r,minY:e.anchor.y-r,maxX:e.anchor.x+r,maxY:e.anchor.y+r};for(let i of this.tree.search(n))if(i.indexedLabel.deduplicationKey===e.deduplicationKey&&i.indexedLabel.anchor.dist(e.anchor)<r)return!0;return!1}makeEntry(e){this.current.get(e)&&console.log("consistency error 1");let r=new Set;this.current.set(e,r)}insert(e,r,n){let i={anchor:e.anchor,bboxes:e.bboxes,draw:e.draw,order:r,tileKey:n,deduplicationKey:e.deduplicationKey,deduplicationDistance:e.deduplicationDistance},s=this.current.get(n);if(!s){let l=new Set;this.current.set(n,l),s=l}s.add(i);let o=!1,a=!1;for(let l of e.bboxes)this.tree.insert({minX:l.minX,minY:l.minY,maxX:l.maxX,maxY:l.maxY,indexedLabel:i}),l.minX<0&&(o=!0),l.maxX>this.dim&&(a=!0);if(o||a){let l=o?this.dim:-this.dim,u=[];for(let m of e.bboxes)u.push({minX:m.minX+l,minY:m.minY,maxX:m.maxX+l,maxY:m.maxY});let h={anchor:new mn.default(e.anchor.x+l,e.anchor.y),bboxes:u,draw:e.draw,order:r,tileKey:n},d=this.current.get(n);d&&d.add(h);for(let m of u)this.tree.insert({minX:m.minX,minY:m.minY,maxX:m.maxX,maxY:m.maxY,indexedLabel:h})}}pruneOrNoop(e){let r=e.split(":"),n,i=0,s=0;for(let o of this.current.keys()){let a=o.split(":");if(a[3]===r[3]){s++;let l=Math.sqrt(X(+a[0]-+r[0],2)+X(+a[1]-+r[1],2));l>i&&(i=l,n=o)}n&&s>this.maxLabeledTiles&&this.pruneKey(n)}}pruneKey(e){let r=this.current.get(e);if(!r)return;let n=[];for(let i of this.tree.all())r.has(i.indexedLabel)&&n.push(i);for(let i of n)this.tree.remove(i);this.current.delete(e)}removeLabel(e){let r=[];for(let i of this.tree.all())e===i.indexedLabel&&r.push(i);for(let i of r)this.tree.remove(i);let n=this.current.get(e.tileKey);n&&n.delete(e)}},Be=class{constructor(e,r,n,i,s){this.index=new ft(256*1<<e,i),this.z=e,this.scratch=r,this.labelRules=n,this.callback=s}layout(e){let r=performance.now(),n=new Set;for(let[s,o]of e)for(let a of o){let l=`${ae(a.data_tile)}:${s}`;this.index.has(l)||(this.index.makeEntry(l),n.add(l))}let i=new Set;for(let[s,o]of this.labelRules.entries()){if(o.visible===!1||o.minzoom&&this.z<o.minzoom||o.maxzoom&&this.z>o.maxzoom)continue;let a=o.dataSource||"",l=e.get(a);if(!!l)for(let u of l){let h=`${ae(u.data_tile)}:${a}`;if(!n.has(h))continue;let d=u.data.get(o.dataLayer);if(d===void 0)continue;let m=d;o.sort&&m.sort((w,k)=>o.sort?o.sort(w.props,k.props):0);let b={index:this.index,zoom:this.z,scratch:this.scratch,order:s,overzoom:this.z-u.data_tile.z};for(let w of m){if(o.filter&&!o.filter(this.z,w))continue;let k=We(w.geom,u.scale,u.origin),c=o.symbolizer.place(b,k,w);if(!!c)for(let f of c){let p=!1;if(!(f.deduplicationKey&&this.index.deduplicationCollides(f))){if(this.index.labelCollides(f,1/0)){if(!this.index.labelCollides(f,s)){let g=this.index.searchLabel(f,1/0);for(let y of g){this.index.removeLabel(y);for(let x of y.bboxes)this.findInvalidatedTiles(i,u.dim,x,h)}this.index.insert(f,s,h),p=!0}}else this.index.insert(f,s,h),p=!0;if(p)for(let g of f.bboxes)(g.maxX>u.origin.x+u.dim||g.minX<u.origin.x||g.minY<u.origin.y||g.maxY>u.origin.y+u.dim)&&this.findInvalidatedTiles(i,u.dim,g,h)}}}}}for(let s of n)this.index.pruneOrNoop(s);return i.size>0&&this.callback&&this.callback(i),performance.now()-r}findInvalidatedTiles(e,r,n,i){let s=yn(this.z,r,n);for(let o of s)o.key!==i&&this.index.hasPrefix(o.key)&&e.add(o.display)}add(e){let r=!0;for(let[i,s]of e)for(let o of s)this.index.has(`${ae(o.data_tile)}:${i}`)||(r=!1);return r?0:this.layout(e)}},Re=class{constructor(e,r,n,i){this.labelers=new Map,this.scratch=e,this.labelRules=r,this.maxLabeledTiles=n,this.callback=i}add(e,r){let n=this.labelers.get(e);return n||(n=new Be(e,this.scratch,this.labelRules,this.maxLabeledTiles,this.callback),this.labelers.set(e,n)),n.add(r)}getIndex(e){let r=this.labelers.get(e);if(r)return r.index}};var xn=$(ee());function Je(t,e,r,n,i,s,o,a,l){let u=performance.now();t.save(),t.miterLimit=2;for(let h of i){if(h.minzoom&&e<h.minzoom||h.maxzoom&&e>h.maxzoom)continue;let d=r.get(h.dataSource||"");if(!!d)for(let m of d){let b=m.data.get(h.dataLayer);if(b===void 0)continue;h.symbolizer.before&&h.symbolizer.before(t,m.z);let w=m.origin,k=m.dim,c=m.scale;if(t.save(),a){t.beginPath();let f=Math.max(w.x-o.x,s.minX-o.x),p=Math.max(w.y-o.y,s.minY-o.y),g=Math.min(w.x-o.x+k,s.maxX-o.x),y=Math.min(w.y-o.y+k,s.maxY-o.y);t.rect(f,p,g-f,y-p),t.clip()}t.translate(w.x-o.x,w.y-o.y);for(let f of b){let p=f.geom,g=f.bbox;g.maxX*c+w.x<s.minX||g.minX*c+w.x>s.maxX||g.minY*c+w.y>s.maxY||g.maxY*c+w.y<s.minY||h.filter&&!h.filter(m.z,f)||(c!==1&&(p=We(p,c,new xn.default(0,0))),h.symbolizer.draw(t,p,m.z,f))}t.restore()}}if(a&&(t.beginPath(),t.rect(s.minX-o.x,s.minY-o.y,s.maxX-s.minX,s.maxY-s.minY),t.clip()),n){let h=n.searchBbox(s,1/0);for(let d of h)if(t.save(),t.translate(d.anchor.x-o.x,d.anchor.y-o.y),d.draw(t),t.restore(),l){t.lineWidth=.5,t.strokeStyle=l,t.fillStyle=l,t.globalAlpha=1,t.fillRect(d.anchor.x-o.x-2,d.anchor.y-o.y-2,4,4);for(let m of d.bboxes)t.strokeRect(m.minX-o.x,m.minY-o.y,m.maxX-m.minX,m.maxY-m.minY)}}return t.restore(),performance.now()-u}var gn=(t,e,r)=>[{dataSource:t,dataLayer:e,symbolizer:new W({opacity:.2,fill:r,radius:4}),filter:(n,i)=>i.geomType===1},{dataSource:t,dataLayer:e,symbolizer:new M({opacity:.2,color:r,width:2}),filter:(n,i)=>i.geomType===2},{dataSource:t,dataLayer:e,symbolizer:new D({opacity:.2,fill:r,stroke:r,width:1}),filter:(n,i)=>i.geomType===3}],dt=(t,e)=>{let r=[];for(let[n,i]of t)for(let s of i)for(let o of s.data.keys())n===e.dataSource&&o===e.dataLayer||(r=r.concat(gn(n,o,"steelblue")));return r=r.concat(gn(e.dataSource||"",e.dataLayer,"red")),r};var Ke=6378137,bn=85.0511287798,H=Ke*Math.PI,wn=t=>{let e=Math.PI/180,r=Math.max(Math.min(bn,t.y),-bn),n=Math.sin(r*e);return new ue.default(Ke*t.x*e,Ke*Math.log((1+n)/(1-n))/2)},ss=t=>{let e=180/Math.PI;return{lat:(2*Math.atan(Math.exp(t.y/Ke))-Math.PI/2)*e,lng:t.x*e/Ke}},os=(t,e)=>r=>{let n=wn(r);return new ue.default((n.x+H)/(H*2),1-(n.y+H)/(H*2)).mult((1<<e)*256).sub(t)},as=(t,e)=>r=>{let n=new ue.default(r.x,r.y).add(t).div((1<<e)*256),i=new ue.default(n.x*(H*2)-H,(1-n.y)*(H*2)-H);return ss(i)},Ut=(t,e)=>{let r=e*(360/t);return Math.log2(r/256)},$t=class{constructor(e){let r=e.dark?ge:be;this.paint_rules=e.paint_rules||De(r,e.shade),this.label_rules=e.label_rules||Ae(r,e.shade,e.language1,e.language2),this.backgroundColor=e.backgroundColor,this.views=He(e),this.debug=e.debug||"",this.xray=e.xray}drawContext(e,r,n,i,s){return O(this,null,function*(){let o=wn(i),l=new ue.default((o.x+H)/(H*2),1-(o.y+H)/(H*2)).clone().mult(X(2,s)*256).sub(new ue.default(r/2,n/2)),u={minX:l.x,minY:l.y,maxX:l.x+r,maxY:l.y+n},h=[];for(let[p,g]of this.views){let y=g.getBbox(s,u);h.push({key:p,promise:y})}let d=yield Promise.all(h.map(p=>p.promise.then(g=>({status:"fulfilled",value:g,key:p.key}),g=>({status:"rejected",value:[],reason:g,key:p.key})))),m=new Map;for(let p of d)p.status==="fulfilled"&&m.set(p.key,p.value);let b=performance.now(),w=new Be(s,e,this.label_rules,16,void 0),k=w.add(m);this.backgroundColor&&(e.save(),e.fillStyle=this.backgroundColor,e.fillRect(0,0,r,n),e.restore());let c=this.paint_rules;this.xray&&(c=dt(m,this.xray));let f=Je(e,s,m,this.xray?null:w.index,c,u,l,!0,this.debug);if(this.debug){e.save(),e.translate(-l.x,-l.y),e.strokeStyle=this.debug,e.fillStyle=this.debug,e.font="12px sans-serif";let p=0;for(let[g,y]of m){for(let x of y){e.strokeRect(x.origin.x,x.origin.y,x.dim,x.dim);let _=x.data_tile;e.fillText(`${g+(g?" ":"")+_.z} ${_.x} ${_.y}`,x.origin.x+4,x.origin.y+14*(1+p))}p++}e.restore()}return{elapsed:performance.now()-b,project:os(l,s),unproject:as(l,s)}})}drawCanvas(s,o,a){return O(this,arguments,function*(e,r,n,i={}){let l=window.devicePixelRatio,u=e.clientWidth,h=e.clientHeight;e.width===u*l&&e.height===h*l||(e.width=u*l,e.height=h*l),i.lang&&(e.lang=i.lang);let d=e.getContext("2d");return d.setTransform(l,0,0,l,0,0),this.drawContext(d,u,h,r,n)})}drawContextBounds(e,r,n,i,s){return O(this,null,function*(){let o=n.x-r.x,a=new ue.default((r.x+n.x)/2,(r.y+n.y)/2);return this.drawContext(e,i,s,a,Ut(o,i))})}drawCanvasBounds(o,a,l,u){return O(this,arguments,function*(e,r,n,i,s={}){let h=n.x-r.x,d=new ue.default((r.x+n.x)/2,(r.y+n.y)/2);return this.drawCanvas(e,d,Ut(h,i),s)})}};var vn=$(ee());var ls=t=>new Promise((e,r)=>{setTimeout(()=>{e()},t)}),us=t=>t.then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e})),hs=(t={})=>{class e extends L.GridLayer{constructor(n={}){n.noWrap&&!n.bounds&&(n.bounds=[[-90,-180],[90,180]]),n.attribution==null&&(n.attribution='<a href="https://protomaps.com">Protomaps</a> \xA9 <a href="https://openstreetmap.org/copyright">OpenStreetMap</a>'),super(n);let i=n.dark?ge:be;this.paint_rules=n.paint_rules||De(i,n.shade),this.label_rules=n.label_rules||Ae(i,n.shade,n.language1,n.language2),this.backgroundColor=n.backgroundColor,this.lastRequestedZ=void 0,this.xray=n.xray,this.tasks=n.tasks||[],this.views=He(n),this.debug=n.debug;let s=document.createElement("canvas").getContext("2d");this.scratch=s,this.onTilesInvalidated=o=>{for(let a of o)this.rerenderTile(a)},this.labelers=new Re(this.scratch,this.label_rules,16,this.onTilesInvalidated),this.tile_size=256*window.devicePixelRatio,this.tileDelay=n.tileDelay||3,this.lang=n.lang,this.inspector=this.inspect(this)}setDefaultStyle(n,i,s,o){let a=n?ge:be;this.paint_rules=De(a,i),this.label_rules=Ae(a,i,s,o)}renderTile(n,i,s,o=()=>{}){return O(this,null,function*(){this.lastRequestedZ=n.z;let a=[];for(let[v,z]of this.views){let F=z.getDisplayTile(n);a.push({key:v,promise:F})}let l=yield Promise.all(a.map(v=>v.promise.then(z=>({status:"fulfilled",value:z,key:v.key}),z=>({status:"rejected",reason:z,key:v.key})))),u=new Map;for(let v of l)v.status==="fulfilled"?u.set(v.key,[v.value]):v.reason.name==="AbortError"||console.error(v.reason);if(i.key!==s||this.lastRequestedZ!==n.z||(yield Promise.all(this.tasks.map(us)),i.key!==s)||this.lastRequestedZ!==n.z)return;let h=this.labelers.add(n.z,u);if(i.key!==s||this.lastRequestedZ!==n.z)return;let d=this.labelers.getIndex(n.z);if(!this._map)return;let m=this._map.getCenter().wrap(),b=this._getTiledPixelBounds(m),k=this._pxBoundsToTileRange(b).getCenter(),c=n.distanceTo(k)*this.tileDelay;if(yield ls(c),i.key!==s||this.lastRequestedZ!==n.z)return;let f=16,p={minX:256*n.x-f,minY:256*n.y-f,maxX:256*(n.x+1)+f,maxY:256*(n.y+1)+f},g=new vn.default(256*n.x,256*n.y);i.width=this.tile_size,i.height=this.tile_size;let y=i.getContext("2d");y.setTransform(this.tile_size/256,0,0,this.tile_size/256,0,0),y.clearRect(0,0,256,256),this.backgroundColor&&(y.save(),y.fillStyle=this.backgroundColor,y.fillRect(0,0,256,256),y.restore());let x=0,_=this.paint_rules;if(this.xray&&(_=dt(u,this.xray)),x=Je(y,n.z,u,this.xray?null:d,_,p,g,!1,this.debug),this.debug){y.save(),y.fillStyle=this.debug,y.font="600 12px sans-serif",y.fillText(`${n.z} ${n.x} ${n.y}`,4,14),y.font="12px sans-serif";let v=28;for(let[z,F]of u){let P=F[0].data_tile;y.fillText(`${z+(z?" ":"")+P.z} ${P.x} ${P.y}`,4,v),v+=14}y.font="600 10px sans-serif",x>8&&(y.fillText(`${x.toFixed()} ms paint`,4,v),v+=14),h>8&&y.fillText(`${h.toFixed()} ms layout`,4,v),y.strokeStyle=this.debug,y.lineWidth=.5,y.beginPath(),y.moveTo(0,0),y.lineTo(0,256),y.stroke(),y.lineWidth=.5,y.beginPath(),y.moveTo(0,0),y.lineTo(256,0),y.stroke(),y.restore()}o()})}rerenderTile(n){for(let i in this._tiles){let s=this._wrapCoords(this._keyToTileCoords(i));n===this._tileCoordsToKey(s)&&this.renderTile(s,this._tiles[i].el,n)}}clearLayout(){this.labelers=new Re(this.scratch,this.label_rules,16,this.onTilesInvalidated)}rerenderTiles(){for(let n in this._tiles){let i=this._wrapCoords(this._keyToTileCoords(n)),s=this._tileCoordsToKey(i);this.renderTile(i,this._tiles[n].el,s)}}createTile(n,i){let s=L.DomUtil.create("canvas","leaflet-tile");s.lang=this.lang;let o=this._tileCoordsToKey(n);return s.key=o,this.renderTile(n,s,o,()=>{i(null,s)}),s}_removeTile(n){let i=this._tiles[n];!i||(i.el.removed=!0,i.el.key=void 0,L.DomUtil.removeClass(i.el,"leaflet-tile-loaded"),i.el.width=i.el.height=0,L.DomUtil.remove(i.el),delete this._tiles[n],this.fire("tileunload",{tile:i.el,coords:this._keyToTileCoords(n)}))}queryFeatures(n,i){let s=new Map;for(let[o,a]of this.views)s.set(o,a.queryFeatures(n,i,this._map.getZoom()));return s}inspect(n){return i=>{let s=["\u25CE","\u27CD","\u25FB"],o=n._map.wrapLatLng(i.latlng),a=n.queryFeatures(o.lng,o.lat),l="",u=!0;for(let[h,d]of a)for(let m of d)if(!(this.xray&&this.xray!==!0&&!((this.xray.dataSource||"")===h&&this.xray.dataLayer===m.layerName))){l=`${l}<div style="margin-top:${u?0:.5}em">${s[m.feature.geomType-1]} <b>${h} ${h?"/":""} ${m.layerName}</b> ${m.feature.id||""}</div>`;for(let b in m.feature.props)l=`${l}<div style="font-size:0.9em">${b} = ${m.feature.props[b]}</div>`;u=!1}u&&(l="No features."),L.popup().setLatLng(i.latlng).setContent(`<div style="max-height:400px;overflow-y:scroll;padding-right:8px">${l}</div>`).openOn(n._map)}}addInspector(n){return n.on("click",this.inspector)}removeInspector(n){return n.off("click",this.inspector)}}return new e(t)};function jt(t){let e=0,r=0;for(let a of t)e+=a.w*a.h,r=Math.max(r,a.w);t.sort((a,l)=>l.h-a.h);let i=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}],s=0,o=0;for(let a of t)for(let l=i.length-1;l>=0;l--){let u=i[l];if(!(a.w>u.w||a.h>u.h)){if(a.x=u.x,a.y=u.y,o=Math.max(o,a.y+a.h),s=Math.max(s,a.x+a.w),a.w===u.w&&a.h===u.h){let h=i.pop();l<i.length&&(i[l]=h)}else a.h===u.h?(u.x+=a.w,u.w-=a.w):a.w===u.w?(u.y+=a.h,u.h-=a.h):(i.push({x:u.x+a.w,y:u.y,w:u.w-a.w,h:a.h}),u.y+=a.h,u.h-=a.h);break}}return{w:s,h:o,fill:e/(s*o)||0}}var Zt=(t,e,r)=>{let n=new FontFace(t,`url(${e})`,{weight:r});return document.fonts.add(n),n.load()},_n=t=>O(void 0,null,function*(){return new Promise((e,r)=>{let n=new Image;n.onload=()=>e(n),n.onerror=()=>r("Invalid SVG"),n.src=t})}),cs=`
<svg width="20px" height="20px" viewBox="0 0 50 50" version="1.1" xmlns="http://www.w3.org/2000/svg">
    <rect width="50" height="50" fill="#cccccc"/>
    <g transform="translate(5,5)">
        <path fill="none" stroke="#666666" stroke-width="7" d="m11,12a8.5,8 0 1,1 17,0q0,4-4,6t-4.5,4.5-.4,4v.2m0,3v7"/>
    </g>
</svg>
`,Nt=class{constructor(e){this.src=e,this.canvas=document.createElement("canvas"),this.mapping=new Map,this.missingBox={x:0,y:0,w:0,h:0}}load(){return O(this,null,function*(){let e=this.src,r=window.devicePixelRatio;e.endsWith(".html")&&(e=yield(yield fetch(e)).text());let n=new window.DOMParser().parseFromString(e,"text/html"),i=Array.from(n.body.children),s=yield _n(`data:image/svg+xml;base64,${btoa(cs)}`),o=[{w:s.width*r,h:s.height*r,img:s,id:""}],a=new XMLSerializer;for(let h of i){let m=`data:image/svg+xml;base64,${btoa(a.serializeToString(h))}`,b=yield _n(m);o.push({w:b.width*r,h:b.height*r,img:b,id:h.id})}let l=jt(o);this.canvas.width=l.w,this.canvas.height=l.h;let u=this.canvas.getContext("2d");if(u)for(let h of o)h.x!==void 0&&h.y!==void 0&&(u.drawImage(h.img,h.x,h.y,h.w,h.h),h.id?this.mapping.set(h.id,{x:h.x,y:h.y,w:h.w,h:h.h}):this.missingBox={x:h.x,y:h.y,w:h.w,h:h.h});return this})}get(e){let r=this.mapping.get(e);return r||(r=this.missingBox),r}};function mt(t,e){return typeof t=="number"?t:e}function Ge(t){if(t.includes("$type"))return e=>!0;if(t[0]==="==")return(e,r)=>r.props[t[1]]===t[2];if(t[0]==="!=")return(e,r)=>r.props[t[1]]!==t[2];if(t[0]==="!"){let e=Ge(t[1]);return(r,n)=>!e(r,n)}if(t[0]==="<")return(e,r)=>mt(r.props[t[1]],1/0)<t[2];if(t[0]==="<=")return(e,r)=>mt(r.props[t[1]],1/0)<=t[2];if(t[0]===">")return(e,r)=>mt(r.props[t[1]],-1/0)>t[2];if(t[0]===">=")return(e,r)=>mt(r.props[t[1]],-1/0)>=t[2];if(t[0]==="in")return(e,r)=>t.slice(2,t.length).includes(r.props[t[1]]);if(t[0]==="!in")return(e,r)=>!t.slice(2,t.length).includes(r.props[t[1]]);if(t[0]==="has")return(e,r)=>r.props.hasOwnProperty(t[1]);if(t[0]==="!has")return(e,r)=>!r.props.hasOwnProperty(t[1]);if(t[0]==="all"){let e=t.slice(1,t.length).map(r=>Ge(r));return(r,n)=>e.every(i=>i(r,n))}if(t[0]==="any"){let e=t.slice(1,t.length).map(r=>Ge(r));return(r,n)=>e.some(i=>i(r,n))}return console.log("Unimplemented filter: ",t[0]),e=>!1}function pt(t){if(t.base&&t.stops)return e=>U(t.base,t.stops)(e-1);if(t[0]==="interpolate"&&t[1][0]==="exponential"&&t[2][0]==="zoom"){let e=t.slice(3),r=[];for(let n=0;n<e.length;n+=2)r.push([e[n],e[n+1]]);return n=>U(t[1][1],r)(n-1)}if(t[0]==="step"&&t[1][0]==="get"){let e=t.slice(2),r=t[1][1];return(n,i)=>{let s=i==null?void 0:i.props[r];if(typeof s=="number"){if(s<e[1])return e[0];for(let o=1;o<e.length;o+=2)if(s<=e[o])return e[o+1]}return e[e.length-1]}}return console.log("Unimplemented numeric fn: ",t),e=>1}function qt(t,e=0){return t?typeof t=="number"?t:(r,n)=>n?pt(t)(r,n):e:e}function Wt(t,e){let r=qt(t,1),n=qt(e);return(i,s)=>{let o=typeof r=="number"?r:r(i,s);return n?o+(typeof n=="number"?n:n(i,s)):o}}function Ht(t,e){let r=[];for(let o of t["text-font"])e.hasOwnProperty(o)&&r.push(e[o]);r.length===0&&r.push({face:"sans-serif"});let n=t["text-size"],i="";r.length&&r[0].weight&&(i=`${r[0].weight} `);let s="";if(r.length&&r[0].style&&(s=`${r[0].style} `),typeof n=="number")return o=>`${s}${i}${n}px ${r.map(a=>a.face).join(", ")}`;if(n.stops){let o=1.4;n.base?o=n.base:n.base=o;let a=pt(n);return(l,u)=>`${s}${i}${a(l,u)}px ${r.map(h=>h.face).join(", ")}`}if(n[0]==="step"){let o=pt(n);return(a,l)=>`${s}${i}${o(a,l)}px ${r.map(u=>u.face).join(", ")}`}return console.log("Can't parse font: ",t),o=>"12px sans-serif"}function fs(t,e){let r=[],n=[],i=new Map;for(let s of t.layers){if(i.set(s.id,s),s.layout&&s.layout.visibility==="none")continue;if(s.ref){let u=i.get(s.ref);s.type=u.type,s.filter=u.filter,s.source=u.source,s["source-layer"]=u["source-layer"]}let o=s["source-layer"],a,l;s.filter&&(l=Ge(s.filter)),s.type==="fill"?r.push({dataLayer:s["source-layer"],filter:l,symbolizer:new D({fill:s.paint["fill-color"],opacity:s.paint["fill-opacity"]})}):s.type==="fill-extrusion"?r.push({dataLayer:s["source-layer"],filter:l,symbolizer:new D({fill:s.paint["fill-extrusion-color"],opacity:s.paint["fill-extrusion-opacity"]})}):s.type==="line"?s.paint["line-dasharray"]?r.push({dataLayer:s["source-layer"],filter:l,symbolizer:new M({width:Wt(s.paint["line-width"],s.paint["line-gap-width"]),dash:s.paint["line-dasharray"],dashColor:s.paint["line-color"]})}):r.push({dataLayer:s["source-layer"],filter:l,symbolizer:new M({color:s.paint["line-color"],width:Wt(s.paint["line-width"],s.paint["line-gap-width"])})}):s.type==="symbol"?s.layout["symbol-placement"]==="line"?n.push({dataLayer:s["source-layer"],filter:l,symbolizer:new le({font:Ht(s.layout,e),fill:s.paint["text-color"],width:s.paint["text-halo-width"],stroke:s.paint["text-halo-color"],textTransform:s.layout["text-transform"],label_props:s.layout["text-field"]?[s.layout["text-field"]]:void 0})}):n.push({dataLayer:s["source-layer"],filter:l,symbolizer:new I({font:Ht(s.layout,e),fill:s.paint["text-color"],stroke:s.paint["text-halo-color"],width:s.paint["text-halo-width"],textTransform:s.layout["text-transform"],label_props:s.layout["text-field"]?[s.layout["text-field"]]:void 0})}):s.type==="circle"&&r.push({dataLayer:s["source-layer"],filter:l,symbolizer:new W({radius:s.paint["circle-radius"],fill:s.paint["circle-color"],stroke:s.paint["circle-stroke-color"],width:s.paint["circle-stroke-width"]})})}return n.reverse(),{paint_rules:r,label_rules:n,tasks:[]}}var ds=t=>{let e=It(4,4,o=>{let a=o.getContext("2d");a&&(a.beginPath(),a.rect(0,0,1,1),a.rect(2,2,1,1),a.fillStyle="black",a.fill())}),r="black";t==="lite"&&(r="#d9d9d9");let n=["name:en","name"],i=[{dataLayer:"earth",symbolizer:new D({fill:"white"})},{dataLayer:"landuse",symbolizer:new D({pattern:e}),filter:(o,a)=>a.props.leisure==="park"},{dataLayer:"water",symbolizer:new D({fill:r})},{dataLayer:"roads",symbolizer:new M({color:"#dddddd"}),filter:(o,a)=>a.props["pmap:kind"]==="minor_road"},{dataLayer:"roads",symbolizer:new M({color:"white",width:fe(16,[7,9,17,20])}),filter:(o,a)=>a.props["pmap:kind"]==="medium_road"},{dataLayer:"roads",symbolizer:new M({color:"#cccccc",width:fe(10,[.2,.2,.2,.4,.8,1.5,4,7,13,16])}),filter:(o,a)=>a.props["pmap:kind"]==="medium_road"},{dataLayer:"roads",symbolizer:new M({color:"white",width:fe(11,[1.25,5,5,5,8,11,18,22,30])}),filter:(o,a)=>a.props["pmap:kind"]==="major_road"},{dataLayer:"roads",symbolizer:new M({color:"black",width:fe(9,[.15,.5,.7,1,1.5,1.9,5,7,12,18,26])}),filter:(o,a)=>a.props["pmap:kind"]==="major_road"},{dataLayer:"roads",symbolizer:new M({color:"white",width:fe(7,[2.25,3.25,4.25,5,6,7,8,9,11,14,24,42,49])}),filter:(o,a)=>a.props["pmap:kind"]==="highway"},{dataLayer:"roads",symbolizer:new M({color:"black",width:fe(6,[.1,1.5,1.5,1.5,2,2.5,3,3,4,6,9,15,28,35])}),filter:(o,a)=>a.props["pmap:kind"]==="highway"},{dataLayer:"transit",symbolizer:new M({color:"#888888",dashColor:"#888888",dash:[1,4],dashWidth:3}),filter:(o,a)=>a.props["pmap:kind"]==="railway",minzoom:14},{dataLayer:"transit",symbolizer:new M({color:"#888888"}),filter:(o,a)=>a.props["pmap:kind"]==="railway",minzoom:14},{dataLayer:"buildings",symbolizer:new M({color:"#888888",width:.5})},{dataLayer:"boundaries",symbolizer:new M({color:"black",width:1}),maxzoom:6},{dataLayer:"boundaries",symbolizer:new M({color:"white",width:2.5,dash:[3,1],dashWidth:.3,dashColor:"black"}),minzoom:7}],s=[{dataLayer:"places",symbolizer:new I({label_props:n,fill:"black",stroke:"white",width:1.5,fontFamily:"Inter",fontWeight:300,fontSize:15,justify:2}),filter:(o,a)=>a.props["pmap:kind"]==="country"},{dataLayer:"places",symbolizer:new I({label_props:n,fill:"black",stroke:"white",width:2,fontFamily:"Inter",fontWeight:300,fontSize:12,justify:2}),filter:(o,a)=>a.props["pmap:kind"]==="state"},{dataLayer:"places",symbolizer:new ce([new W({radius:2,fill:"black",stroke:"white",width:2}),new te({label_props:n,offsetX:3,fill:"black",stroke:"white",width:1.5,fontFamily:"Inter",fontWeight:600,fontSize:(o,a)=>(a==null?void 0:a.props["pmap:rank"])===1?15:13})]),sort:(o,a)=>o["pmap:rank"]-a["pmap:rank"],filter:(o,a)=>a.props["pmap:kind"]==="city",maxzoom:8},{dataLayer:"places",symbolizer:new I({label_props:n,justify:2,fill:"black",stroke:"white",width:2,fontFamily:"Inter",fontWeight:600,fontSize:(o,a)=>(a==null?void 0:a.props["pmap:rank"])===1?15:13}),sort:(o,a)=>o["pmap:rank"]-a["pmap:rank"],filter:(o,a)=>a.props["pmap:kind"]==="city",minzoom:9},{dataLayer:"water",symbolizer:new re({label_props:n,fill:"white",stroke:"black",width:3,font:"italic 400 12px Inter"})},{dataLayer:"landuse",symbolizer:new re({fill:"black",stroke:"white",width:2,font:"italic 400 12px Inter"})},{dataLayer:"physical_point",symbolizer:new I({label_props:n,fill:"white",stroke:"black",width:3,font:"italic 600 12px Inter",textTransform:"uppercase",justify:2}),filter:(o,a)=>["ocean","sea"].includes(a.props.place)},{dataLayer:"roads",symbolizer:new le({fill:"black",stroke:"white",width:2,font:"600 14px Inter",offset:4})}];return{tasks:[Zt("Inter","https://cdn.protomaps.com/fonts/woff2/Inter.var.woff2","100 900")],paint_rules:i,label_rules:s,attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>.'}};return Mn(ms);})();
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
